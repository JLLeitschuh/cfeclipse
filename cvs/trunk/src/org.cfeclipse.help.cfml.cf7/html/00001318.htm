<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Indexing a file returned using a query</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001317.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001319.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Indexing a file returned using a query</h1>
<p>You can index an individual file using a query by retrieving a table row whose contents are a filename. In this case, the key specifies the column that contains the complete filename. The file is indexed using the <code>cfindex</code> tag as if it were a document under the web server root folder.</p>
<p>In the following example, the <code>cfindex</code> tag's <code>type</code> attribute has been set to <code>file</code>, and the specified key is the name of the column that contains the full path to the file and the filename. </p>
<h4>To index a file specified by a query:</h4>
<pre>&lt;cfquery name=&quot;getEmps&quot; datasource=&quot;cfdocexamples&quot;&gt;
SELECT * FROM EMPLOYEE WHERE EMP_ID = 1
&lt;/cfquery&gt;
&lt;cfindex 
   query=&quot;getEmps&quot;
   collection=&quot;CodeColl&quot;
   action=&quot;Update&quot;
<code><strong>   type=&quot;file&quot;</strong></code>
<code><strong>   key=&quot;Contract_File&quot; </strong></code>
   title=&quot;Contract_File&quot;
   body=&quot;Emp_ID,FirstName,LastName,Contract_File&quot;&gt;
</pre><h4>To search and display the file:</h4>
<ol>
<li>
   Create a ColdFusion page that contains the following content:
</li>
</ol>
<pre>&lt;!--- Output the record set.---&gt;
&lt;p&gt;Your collection now includes the following items:&lt;/p&gt;
&lt;cfoutput query=&quot;getEmps&quot;&gt;
&lt;p&gt;#Emp_ID# #FirstName# #LastName# #Contract_File#&lt;/p&gt;
&lt;/cfoutput&gt;
&lt;cfsearch 
   collection=&quot;#Form.collname#&quot;
   name=&quot;getEmps&quot;
   criteria=&quot;#Form.Criteria#&quot;
   maxrows = &quot;100&quot;&gt;

&lt;!--- Output the file name contained in the record set. ---&gt;
&lt;cfoutput&gt;
Your search returned #getEmps.RecordCount# file(s).
&lt;/cfoutput&gt;
&lt;cfoutput query=&quot;getEmps&quot;&gt;
&lt;p&gt;&lt;table&gt;
   &lt;tr&gt;&lt;td&gt;Title: &lt;/td&gt;&lt;td&gt;#Title#&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;Score: &lt;/td&gt;&lt;td&gt;#Score#&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;Key: &lt;/td&gt;&lt;td&gt;#Key#&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;Summary: &lt;/td&gt;&lt;td&gt;#Summary#&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;Custom 1:&lt;/td&gt;&lt;td&gt;#Custom1#&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;Column list: &lt;/td&gt;&lt;td&gt;#ColumnList#&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;/p&gt;
&lt;/cfoutput&gt;
</pre>

<hr />
<p align="right"><p align="right"><a href="00001317.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001319.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001318.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



