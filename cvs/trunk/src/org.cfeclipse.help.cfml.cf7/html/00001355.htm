<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Grouping output from a query</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001354.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001356.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Grouping output from a query</h1>
<p>In a query that you display using a <a href="00000347.htm#1104271"><code>cftree</code></a> control, you might want to organize your employees by department. In this case, you separate column names with commas in the <a href="00000348.htm#1104421"><code>cftreeitem</code></a> <code>value</code> attribute.</p>
<h4>To organize the tree based on ordered results of a query:</h4>
<ol>
<li>
   Create a ColdFusion page named tree2.cfm with the following content:
<pre>
&lt;!--- CFQUERY with an ORDER BY clause. ---&gt;
&lt;cfquery name=&quot;deptquery&quot; datasource=&quot;cfdocexamples&quot;&gt;
	SELECT Dept_ID, FirstName + &#39; &#39; + LastName
	AS FullName
	FROM Employee
	ORDER BY Dept_ID
&lt;/cfquery&gt;

&lt;!--- Build the tree control. ---&gt;
&lt;cfform name=&quot;form1&quot; action=&quot;submit.cfm&quot;&gt;

&lt;cftree name=&quot;tree1&quot;
	hscroll=&quot;No&quot;
	border=&quot;Yes&quot;
	height=&quot;350&quot;
	required=&quot;Yes&quot;
&gt;

&lt;cftreeitem value=&quot;Dept_ID, FullName&quot;
	query=&quot;deptquery&quot;
	queryasroot=&quot;Dept_ID&quot;
	img=&quot;computer,folder,document&quot;
	imgopen=&quot;computer,folder&quot;
	expand=&quot;yes&quot;&gt;

&lt;/cftree&gt;
&lt;br&gt;
&lt;br&gt;&lt;input type=&quot;Submit&quot; value=&quot;Submit&quot;&gt;
&lt;/cfform&gt;
</pre>
</li>
<li>
   Save the page and view it in your browser. It should look as follows
<p><br />
<img src="images/cftree24.jpg" alt="Tree control containing ordered results from a query" border="0" hspace="0" vspace="0"/>
<br />
</p>
</li>
</ol>
<h4><a name="wp1096435"></a>Reviewing the code</h4>
<p>The following table describes the highlighted code and its function</p>
:<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Code
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<pre>ORDER BY Dept_ID
</pre>    </td>
    <td>
<p>Orders the query results by department.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<pre>&lt;cftreeitem value=&quot;Dept_ID,FullName&quot;
</pre>    </td>
    <td>
<p>Populates the tree with the department ID, and under each department, the full name for each employee in the department.</p>
    </td>
  </tr>
  <tr>
    <td>
<pre>queryasroot=&quot;Dept_ID&quot;
</pre>    </td>
    <td>
<p>Labels the root &quot;Dept_ID&quot;.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<pre>img=&quot;computer,folder,document&quot;
imgopen=&quot;computer,folder&quot;
</pre>    </td>
    <td>
<p>Uses the ColdFusion supplied computer image for the root level, folder image for the department IDs, and document for the names, independent of whether any level is expanded (open) or collapsed. The <code>imgopen</code> attribute has only two items, because the employee names can never be open.</p>
    </td>
  </tr>
</table>

<p>The <code>cftreeitem</code> comma-separated <code>value</code>, <code>img</code>, and <code>imgopen</code> attributes correspond to the tree level structure. In applet format, if you omit the <code>img</code> attribute, ColdFusion uses the folder image for all levels in the tree; if you omit the <code>imgopen</code> attribute, ColdFusion uses the folder image for all expanded levels in the tree. Flash format ignores the <code>img</code> and <code>imgopen</code> attributes and always uses folders for levels with children and documents for nodes without children.</p>


<hr />
<p align="right"><p align="right"><a href="00001354.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001356.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001355.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



