<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Using client and session variables without cookies</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001150.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001152.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Using client and session variables without cookies</h1>
<p>Often, users disable cookies in their browsers. In this case, ColdFusion cannot maintain the client state automatically. You can use client or session variables without using cookies, by passing the client identification information between application pages. However, this technique has significant limitations, as follows:</p>
<ul>
<li>
   Client variables are effectively the same as session variables, except that they leave unusable data in the client data store.
<p>Because the client's system does not retain any identification information, the next time the user logs on, ColdFusion cannot identify the user with the previous client and must create a new client ID for the user. Any information about the user from a previous session is not available, but remains in client data storage until ColdFusion deletes it. If you clear the Purge Data for Clients that Remain Unvisited option in the ColdFusion&#160;MX Administrator, ColdFusion never deletes this data.</p>
<p>Therefore, do not use client variables, if you allow users to disable cookies. To retain client information without cookies, require users to login with a unique ID. You can then save user-specific information in a database with the user's ID as a key.</p>
</li>
<li>
   ColdFusion creates a new session each time the user requests a page directly in the browser, because the new request contains no state information to indicate the session or client.
</li>
</ul>
<p><strong>Note: </strong>You can prevent ColdFusion from sending client information to the browser as cookies by setting This.setClientCookies variable in Application.cfc or the <code>setClientCookies</code> attribute of the <a href="00000217.htm#1097308"><code>cfapplication</code></a> tag to No.</p><p>To use ColdFusion session variables without using cookies, each page must pass the <code>CFID</code> and <code>CFToken</code> values to any page that it calls as part of the request URL. If a page contains any HTML <code>href</code> <code>a=</code> links, <a href="00000284.htm#1100753"><code>cflocation</code></a> tags, <code>form</code> tags, or <a href="00000256.htm#2433198"><code>cfform</code></a> tags the tags must pass the <code>CFID</code> and <code>CFToken</code> values in the tag URL. To use J2EE session management, you must pass the <code>jsessionid</code> value in page requests. To use ColdFusion client variables and J2EE session variables, you must pass the <code>CFID</code>, <code>CFToken</code>, and <code>jsessionid</code> values in URLs. </p>
<p>ColdFusion provides the <a href="00000660.htm#139074"><code>URLSessionFormat</code></a> function, which does the following:</p>
<ul>
<li>
   If the client does not accept cookies, automatically appends all required client identification information to a URL.
</li>
<li>
   If the client accepts cookies, does not append the information. 
</li>
</ul>
<p>The <code>URLSessionFormat</code> function automatically determines which identifiers are required, and sends only the required information. It also provides a more secure and robust method for supporting client identification than manually encoding the information in each URL, because it only sends the information that is required, when it is required, and it is easier to code.</p>
<p>To use the <code>URLSessionFormat</code> function, enclose the request URL in the function. For example, the following <code>cfform</code> tag posts a request to another page and sends the client identification, if required:</p>
<pre>&lt;cfform method=&quot;Post&quot; action=&quot;#URLSessionFormat(&quot;MyActionPage.cfm&quot;)#&gt;
</pre><p><strong>Tip: </strong>If you use the same page URL in multiple <code>URLSessionFormat</code> functions, you can gain a small performance improvement and simplify your code if you assign the formatted page URL to a variable, for example: </p><pre>&lt;cfset myEncodedURL=URLSessionFormat(MyActionPage.cfm)&gt;
&lt;cfform method=&quot;Post&quot; action=&quot;#myEncodedURL#&quot;&gt;
</pre>

<hr />
<p align="right"><p align="right"><a href="00001150.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001152.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001151.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



