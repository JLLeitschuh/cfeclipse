<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Building secure ColdFusion components</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001062.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001064.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Building secure ColdFusion components</h1>
<p>To restrict access to component methods, ColdFusion components use the following security features:</p>
<ul>
<li>
   Access security
</li>
<li>
   Role-based security
</li>
<li>
   Programmatic security
</li>
</ul>
<h3><a name="wp1215162"></a>Using access security</h3>
<p>CFC access security lets you limit the code that can access the components. You specify the access to a CFC method by specifying the <a href="00000263.htm#2852457"><code>cffunction</code></a> <code>access</code> attribute, as follows:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Type
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>private</p>
    </td>
    <td>
<p>Available only to the component that declares the method and any components that extend the component in which it is defined. This usage is similar to the Java protected keyword, <i>not</i> the Java private keyword.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>package</p>
    </td>
    <td>
<p>Available only to the component that declares the method, components that extend the component, or any other components in the package. A package consists of all components defined in a single directory. For more information on packages, see <a href="00001061.htm#1215093">Using component packages</a>.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>public</p>
    </td>
    <td>
<p>Available to any locally executing ColdFusion page or component method.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>remote</p>
    </td>
    <td>
<p>Available to a locally or remotely executing ColdFusion page or component method, or to a local or remote client through a URL, form submission, Flash Remoting MX, or as a web service.</p>
    </td>
  </tr>
</table>

<h3><a name="wp1215195"></a>Using role-based security</h3>
<p>If you specify a <code>roles</code> attribute in a <code>cffunction</code> tag, only users who are logged in with one of the specified roles can execute the method. When a user tries to invoke a method that he or she is not authorized to invoke, an exception is returned. </p>
<p>The following example creates a component method that deletes files:</p>
<pre>&lt;cfcomponent&gt;
   &lt;cffunction 
&#160;&#160;&#160;&#160;&#160;&#160;name=&quot;deleteFile&quot; access=&quot;remote&quot; <code><strong>roles=&quot;admin,manager&quot;</strong></code> output=&quot;no&quot;&gt;
      &lt;cfargument name=&quot;filepath&quot; required=&quot;yes&quot;&gt;
      &lt;cffile action=&quot;DELETE&quot; file=#arguments.filepath#&gt;
   &lt;/cffunction&gt;
&lt;/cfcomponent&gt; 
</pre><p>In the example, the <a href="00000263.htm#2852457"><code>cffunction</code></a> tag includes the <code>roles</code> attribute to specify the user roles allowed to access it. In this example, only users in the role <code>admin</code> and <code>manager</code> can access the function. Notice that multiple roles are delimited by a comma. </p>
<p>For information on ColdFusion security, including the <a href="00000287.htm#2991147"><code>cflogin</code></a> tag and role-based security in ColdFusion MX, see <a href="00001175.htm#1100022">Securing Applications</a>.</p>
<h3><a name="wp1230543"></a>Using programmatic security</h3>
<p>You can implement your own security within a method to protect resources. For example you can use the ColdFusion function <a href="00000533.htm#4047189"><code>IsUserInRole</code></a> to determine if a user is in particular role, as the following example shows:</p>
<pre>&lt;cffunction name=&quot;foo&quot;&gt;
   &lt;cfif IsUserInRole(&quot;admin&quot;)&gt;
      … do stuff allowed for admin
   &lt;cfelseif IsUserInRole(&quot;user&quot;)&gt;
      … do stuff allowed for user
   &lt;cfelse&gt;
      &lt;cfoutput&gt;unauthorized access&lt;/cfoutput&gt;
      &lt;cfabort&gt;
   &lt;/cfif&gt;
&lt;/cffunction&gt;
</pre>

<hr />
<p align="right"><p align="right"><a href="00001062.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001064.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001063.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



