<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Dynamically populating list boxes</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001344.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001346.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Dynamically populating list boxes</h1>
<p>The code in <a href="00001333.htm#1147025">Creating a basic form</a> hard-coded the form's list box options. Instead of manually entering the information on a form, you can dynamically populate a list box with database fields. When you write code this way, the form page automatically reflects the changes that you make to the database.</p>
<p>You use two tags to dynamically populate a list box:</p>
<ul>
<li>
   Use the <a href="00000316.htm#1102316"><code>cfquery</code></a> tag to retrieve the column data from a database table. 
</li>
<li>
   Use the <a href="00000309.htm#1101659"><code>cfoutput</code></a> tag with the <code>query</code> attribute within the <code>select</code> tag to dynamically populate the <code>options</code> of this form control.
</li>
</ul>
<h4>To dynamically populate a list box:</h4>
<ol>
<li>
   Open the formpage.cfm page.
</li>
<li>
   Modify the file so that it appears as follows:
<pre>
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Input form&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;cfquery name=&quot;GetDepartments&quot; datasource=&quot;cfdocexamples&quot;&gt;
	SELECT DISTINCT Location
	FROM Departmt
&lt;/cfquery&gt;

&lt;!--- Define the action page in the form tag. 
	The form variables pass to this page 
	when the form is submitted ---&gt;

&lt;cfform action=&quot;actionpage.cfm&quot; method=&quot;post&quot;&gt;

&lt;!--- Text box. ---&gt;
&lt;p&gt;
First Name: &lt;cfinput type=&quot;Text&quot; name=&quot;FirstName&quot; size=&quot;20&quot; 
maxlength=&quot;35&quot;&gt;&lt;br&gt;
Last Name: &lt;cfinput type=&quot;Text&quot; name=&quot;LastName&quot; size=&quot;20&quot; 
maxlength=&quot;35&quot;&gt;&lt;br&gt;
Salary: &lt;cfinput type=&quot;Text&quot; name=&quot;Salary&quot; size=&quot;10&quot; maxlength=&quot;10&quot;&gt;
&lt;/p&gt;

&lt;!--- List box. ---&gt;
City
&lt;cfset optsize=getDepartments.recordcount + 1&gt;
&lt;cfselect name=&quot;City&quot; query=&quot;GetDepartments&quot; value=&quot;Location&quot; 
size=&quot;#optsize#&quot;&gt;
	&lt;option value=&quot;&quot;&gt;Select All
&lt;/cfselect&gt;

&lt;!--- Radio buttons. ---&gt;
&lt;p&gt;
Department:&lt;br&gt;
&lt;cfinput type=&quot;radio&quot; name=&quot;Department&quot; value=&quot;Training&quot;&gt;Training&lt;br&gt;
&lt;cfinput type=&quot;radio&quot; name=&quot;Department&quot; value=&quot;Sales&quot;&gt;Sales&lt;br&gt;
&lt;cfinput type=&quot;radio&quot; name=&quot;Department&quot; value=&quot;Marketing&quot;&gt;Marketing&lt;br&gt;
&lt;cfinput type=&quot;radio&quot; name=&quot;Department&quot; value=&quot;HR&quot;&gt;HR&lt;br&gt;
&lt;/p&gt;

&lt;!--- Check box. ---&gt;
&lt;p&gt;
Contractor? &lt;cfinput type=&quot;checkbox&quot; name=&quot;Contractor&quot; value=&quot;Yes&quot; 
checked&gt;Yes
&lt;/p&gt;

&lt;!--- Reset button. ---&gt;
&lt;cfinput type=&quot;reset&quot; name=&quot;ResetForm&quot; value=&quot;Clear Form&quot;&gt;

&lt;!--- Submit button. ---&gt;
&lt;cfinput type=&quot;submit&quot; name=&quot;SubmitForm&quot; value=&quot;Submit&quot;&gt;
&lt;/cfform&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</li>
<li>
   Save the page as formpage.cfm.
</li>
<li>
   View the formpage.cfm page in a browser. 
<p>The changes that you just made appear in the form.</p>
<p>Remember that you need an action page to submit values. </p>
</li>
</ol>
<h4><a name="wp1133223"></a>Reviewing the code</h4>
<p>The following table describes the highlighted code and its function:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Code
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<pre>&lt;cfquery name=&quot;GetDepartments&quot;
datasource=&quot;cfdocexamples&quot;&gt;
SELECT DISTINCT Location
FROM Departmt
&lt;/cfquery&gt;
</pre>    </td>
    <td>
<p>Gets the locations of all departments in the Departmt table. The DISTINCT clause eliminates duplicate location names from the returned query results. </p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<pre>&lt;cfset optsize=getDepartments.recordcount + 1&gt;
</pre>    </td>
    <td>
<p>Sets the optsize variable to the number of entries to add dynamically to the selection list, plus one for the manually coded Select All option.</p>
    </td>
  </tr>
  <tr>
    <td>
<pre>&lt;cfselect name=&quot;City&quot; query=&quot;GetDepartments&quot; value=&quot;Location&quot; size=&quot;#optsize#&quot;&gt;
   &lt;option value=&quot;&quot;&gt;Select All
&lt;/cfselect&gt;
</pre>    </td>
    <td>
<p>Populates the City selection list from the Location column of the GetDepartments query. The control has one option for each row returned by the query.</p>
<p>Adds an option that allows users to select all locations. If the user selects this option, the form value is an empty string. The action page must check for the empty string and handle it appropriately.</p>
    </td>
  </tr>
</table>



<hr />
<p align="right"><p align="right"><a href="00001344.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001346.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001345.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



