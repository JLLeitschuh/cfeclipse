<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Understanding search query operators</title>
</head>
<body>
<p align="right"><p align="right"><a href="00000130.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000132.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Understanding search query operators</h1>
<p>Now that you have decided which columns can be queried (tripLocation, departureDate, and price), you can build a simple form that lets the user enter values for each of these fields. If the user enters a value (for example, Boston) for the tripLocation field and leaves the other two fields blank, the search results page constructs the following SQL statement:</p>
<pre>SELECT tripName, tripLocation, departureDate, 
   returnDate, price, tripID 
FROM trips
WHERE tripLocation = &#39;Boston&#39;
</pre><p>When you design the Search Criteria page, you must decide which operators to support for each of the columns you can query. The operators that you use depend on the data type of the SQL column. </p>
<p>For example, suppose the user wants a list of all the trips where the trip location begins with a &quot;B.&quot; SQL is well-suited for this type of query. Typical SQL string operators are equals, starts with, contains, and ends with.</p>
<p>However, price is a numeric data type. The user can specify any of the following:</p>
<ul>
<li>
   Price is 5000
</li>
<li>
   Price less than 600
</li>
<li>
   Price greater than 1500
</li>
</ul>
<p>Although many more operators are permissible, for simplification, you can use the following operators for the Compass Travel columns that you can query:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Column to query
    </th>
    <th>
Query operators
    </th>
  </tr>
  <tr>
    <td>
<p>tripLocation</p>
    </td>
    <td>
<p>is, begins with</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>departureDate</p>
    </td>
    <td>
<p>is, before, after</p>
    </td>
  </tr>
  <tr>
    <td>
<p>price</p>
    </td>
    <td>
<p>is, greater than, less than</p>
    </td>
  </tr>
</table>

<h3><a name="wp1160599"></a>Creating the Trip Search page</h3>
<p>A simple design for a search criteria page presents an operator list and data entry field for each of the columns that you can query. To create the search criteria page, you create an HTML form.</p>
<h4>To create the search page:</h4>
<ol>
<li>
   Create a blank file.
<p><strong>Note: </strong>If you are using Dreamweaver, select Dynamic page in the Category list and ColdFusion in the Dynamic Page list.</p></li>
<li>
   Enter, or copy and paste, the following code in the blank file:
<pre>
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Trip Maintenance - Search Form&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;img src=&quot;images/tripsearch.gif&quot;&gt;
&lt;!--- Search form ---&gt;
&lt;form action=&quot;tripsearchresult.cfm&quot; method=&quot;post&quot;&gt;

&lt;table&gt;
	&lt;!--- Field: tripLocation ---&gt;
	&lt;tr&gt;
		&lt;td&gt;	Trip Location
		&lt;/td&gt;
		&lt;td&gt;
			&lt;select name=&quot;tripLocationOperator&quot;&gt;
				&lt;option value=&quot;EQUALS&quot;&gt;is
				&lt;option value=&quot;BEGINS_WITH&quot;&gt;begins with
			&lt;/select&gt;
		&lt;/td&gt;
		&lt;td&gt;
			&lt;input type=&quot;text&quot; name=&quot;tripLocationValue&quot;&gt;
		&lt;/td&gt;
	&lt;/tr&gt;	
	&lt;!--- Field: departureDate ---&gt;
	&lt;tr&gt;
		&lt;td&gt;	Departure Date
		&lt;/td&gt;
		&lt;td&gt;
			&lt;select name=&quot;departureOperator&quot;&gt;
				&lt;option value=&quot;EQUALS&quot;&gt;is
				&lt;option value=&quot;BEFORE&quot;&gt;before
				&lt;option value=&quot;AFTER&quot;&gt;after
			&lt;/select&gt;
		&lt;/td&gt;
		&lt;td&gt;
			&lt;input type=&quot;text&quot; name=&quot;departureValue&quot;&gt;
			&lt;/td&gt;
	&lt;/tr&gt;	
	&lt;!--- Field: price ---&gt;
	&lt;tr&gt;
		&lt;td&gt;Price
		&lt;/td&gt;
		&lt;td&gt;
			&lt;select name=&quot;priceOperator&quot;&gt;
				&lt;option value=&quot;EQUALS&quot;&gt;is
				&lt;option value=&quot;GREATER&quot;&gt;greater than
				&lt;option value=&quot;SMALLER&quot;&gt;smaller than
			&lt;/select&gt;
		&lt;/td&gt;
		&lt;td&gt;
			&lt;input type=&quot;text&quot; name=&quot;priceValue&quot;&gt;
		&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;
&lt;input type=&quot;submit&quot; value=&quot;Search&quot;&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</li>
<li>
   Save the file as tripsearchform.cfm in the my_app directory.
</li>
</ol>
<h4><a name="wp1196544"></a>Reviewing the code</h4>
<p>The following table describes the search criteria code and its function:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Code 
    </th>
    <th>
Explanation
    </th>
  </tr>
  <tr>
    <td>
<pre>&lt;form action=&quot;tripsearchresult.cfm&quot; method=&quot;post&quot;&gt;
</pre>    </td>
    <td>
<p>Identifies tripsearchresult.cfm as the search action page. Results of user entry are passed to the search action page.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<pre>&lt;select name=&quot;tripLocationOperator&quot;&gt;
&lt;option value=&quot;EQUALS&quot;&gt;is
&lt;option value=&quot;BEGINS_WITH&quot;&gt;begins with
&lt;/select&gt;
</pre>    </td>
    <td>
<p>Builds a drop-down list offering the query operators for tripLocation. There must one operator list box for each queryable column. </p>
    </td>
  </tr>
  <tr>
    <td>
<pre>&lt;input type=&quot;text&quot; name=&quot;tripLocationValue&quot;&gt;
</pre>    </td>
    <td>
<p>Captures a value to test. There is one text control for each queryable column.</p>
    </td>
  </tr>
</table>



<hr />
<p align="right"><p align="right"><a href="00000130.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000132.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00000131.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



