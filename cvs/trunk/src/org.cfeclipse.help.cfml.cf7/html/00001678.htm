<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Synchronization mode</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001677.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001679.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Synchronization mode</h1>
<p>You can specify asynchronous or synchronous message mode in the gateway configuration file.</p>
<ul>
<li>
   If you specify <i>asynchronous</i> mode, the <code>sendGatewayMessage</code> function returns an empty string when the message is submitted by the gateway to service code for sending to the SMSC. ColdFusion logs errors that might occur after this point, such as if a message sent by the gateway to the SMSC times out or if the gateway gets an error response; the application does not get notified of any errors.
</li>
<li>
   If you specify <i>synchronous</i> mode (the default), the <code>sendGatewayMessage</code> function does not return until the gateway gets a response from the SMSC or the attempt to communicate times out. If the message is sent successfully, the function returns the SMPP message ID string. If an error occurs, the function returns an error string.
</li>
</ul>
<p>Use synchronous mode if your application must determine whether its messages reach the SMSC. Also use synchronous mode if the application requests return receipts.</p>
<p><strong>Note: </strong>If you use synchronous mode and the SMSC returns the messgeID as a hexadecimal string, ColdFusion&#160;MX converts it automatically to its decimal value.</p><p>The following example is an expansion of <a href="00001674.htm#142452">Example: Using the submit command in sendGatewayMessage function</a>. It checks for a nonempty return value and displays the message number returned by the SMS. This example uses the SMS gateway that is configured when ColdFusion&#160;MX is installed. If you change the gateway specified in the <code>SendGatewayMessage</code> function, make sure that you gateway's configuration file specifies synchronous mode.</p>
<pre>&lt;h3&gt;Sending SMS From a Web Page Example&lt;/h3&gt;

&lt;cfif IsDefined(&quot;form.oncethrough&quot;) is &quot;Yes&quot;&gt;
   &lt;cfif IsDefined(&quot;form.SMSMessage&quot;) is True AND form.SMSMessage is not &quot;&quot;&gt;
       &lt;h3&gt;Sending a Text Message: &lt;/h3&gt;
         &lt;cfoutput&gt;#form.SMSMessage#&lt;/cfoutput&gt;&lt;br&gt;&lt;br&gt;

      &lt;cfscript&gt;
         /* Create a structure that contains the message. */
         msg = structNew();
         msg.command = &quot;submit&quot;;
         msg.destAddress = &quot;5551234&quot;;
         msg.shortMessage = form.SMSMessage;   
         ret = sendGatewayMessage(&quot;SMS Menu App - 5551212&quot;, msg);
      &lt;/cfscript&gt;
   &lt;/cfif&gt;
   &lt;cfif isDefined(&quot;ret&quot;) AND ret NEQ &quot;&quot;&gt;
      &lt;h3&gt;Text message sent&lt;/h3&gt;
      &lt;cfoutput&gt;The Message Id is: #ret#&lt;/cfoutput&gt;
      &lt;br&gt;&lt;br&gt;
   &lt;/cfif&gt;   
   &lt;hr noshade&gt;
&lt;/cfif&gt;

&lt;!--- begin by calling the cfform tag ---&gt;
&lt;cfform&gt;
   SMS Text Message: &lt;cfinput type=&quot;Text&quot; name=&quot;SMSMessage&quot; 
      value=&quot;Sample text Message&quot; required=&quot;No&quot; maxlength=&quot;160&quot;&gt;
   &lt;p&gt;&lt;input type = &quot;submit&quot; name = &quot;submit&quot; value = &quot;Submit&quot;&gt;
   &lt;input type = &quot;hidden&quot; name = &quot;oncethrough&quot; value = &quot;Yes&quot;&gt;
&lt;/cfform&gt;
</pre>

<hr />
<p align="right"><p align="right"><a href="00001677.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001679.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001678.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



