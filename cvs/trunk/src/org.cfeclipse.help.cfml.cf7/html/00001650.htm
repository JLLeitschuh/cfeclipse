<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Menu example application</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001649.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001651.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Menu example application</h1>
<p>ColdFusion&#160;MX is installed with a menu-based responder application. The menu application is written to work with any of the standard ColdFusion&#160;MX event gateways (SMS, XMPP, and Sametime) and with the Socket example event gateway, and ColdFusion&#160;MX is preconfigured with an instance of the application that uses SMS, as follows:</p>
<ul>
<li>
   The Gateways page in the ColdFusion&#160;MX Administrator includes a gateway instance for this application that uses the SMS gateway type. 
</li>
<li>
   The gateway/cfc/examples/menu directory and its subdirectories include the CFML for the application
</li>
<li>
   The gateway/config/sms-test.cfg file is configured to use this application with the SMS client (phone simulator), and short message service center (SMSC) server simulator that are provided with ColdFusion&#160;MX. 
</li>
</ul>
<p>The application presents users with a drill-down menu of tools that they can use, including a weather report, stock information, status and configuration information, and language tools such as a dictionary. </p>
<p>The code for this application is relatively complex and is distributed among 13 files. The following brief description provides an overview of how it works. To get a full understanding of how the application works, see the source code.</p>
<ul>
<li>
   The top level, menu, directory contains two files: Application.cfm and main.cfc.
</li>
<li>
   The Application.cfm file consists of a single <code>cfapplication</code> tag that enables session management and names the application. Session variables maintain the current state information of the session, such as the active menu, and so on. 
</li>
<li>
   The main.cfc file contains the master CFC; the event gateway configuration in ColdFusion MX Administrator uses it as the listener CFC. The main CFC file processes CFEvent structures from the event gateway. It does the following:
<ol><li>Inspects the gatewayType field to determine the rest of the structure contents. This is necessary because different event gateways put the message in fields with different names. </li><li>If a Session.menu variable does not exist, initializes the menu system. To do so, it calls methods in two other CFCs: menu and menunode. These two CFCs contain the menu system code. </li><li>Calls the session.menu.process method to process the user's input. This method can dispatch a message to an individual application for processing, if appropriate.</li></ol></li>
<li>
   The apps directory contains several CFCs. Each file contains the code for a single application, such as the weather report or dictionary lookup (definition.cfc). 
</li>
</ul>
<h4>To use the menu application with the Socket event gateway:</h4>
<ol>
<li>
   On the Gateway Settings page in the ColdFusion&#160;MX Administrator, click the Start SMS Test Server button.
</li>
<li>
   On the Gateways page in the ColdFusion&#160;MX Administrator, start the SMS Menu App - 5551212 event gateway by clicking the green play button (third button from the left in the Actions column). If the Status does not say Running after a few seconds, click Refresh to check that the server started.
</li>
<li>
   In the <i>cf_root</i>\WEB-INF\cfusion\bin directory on J2EE configurations or the <i>cf_root</i>\bin directory on server configurations, run the SMSClient.bat file (on Windows) or SMSClient.sh file (on UNIX or Linux) to start the SMS phone simulator. The simulator is preconfigured by default to &quot;call&quot; the default SMS event gateway configuration. 
</li>
<li>
   Enter any character by typing or by using the mouse to click the simulator keypad, and press Enter on your keyboard or click Send on the simulator.
</li>
<li>
   The menu application responds with the top-level menu. Enter L for language tools such as a dictionary and thesaurus, S to get stock quotes or weather forecasts, or C to get information about the server. Press Enter on your keyboard or click Send on the simulator.
</li>
<li>
   The application displays a submenu. For example, if you select S in step 5, the options are Q for a stock quote, W for weather, or B to go back to the previous menu. Enter your selection.
</li>
<li>
   The application requests information such as a Zip code for the weather, stock symbol for a price, word for the dictionary, and so on. Enter and send the required information (or enter B to go back to the menu).
</li>
<li>
   The application gets and displays the requested information. Depending on the application, you might also be prompted to enter M to get more. Enter M (if there is more information available), another term, or B to return to the previous menu. 
</li>
<li>
   Continue by entering menu items and detailed information requests. 
</li>
<li>
   To exit, select File &gt; Exit from the menu bar.
</li>
</ol>
<p></p>


<hr />
<p align="right"><p align="right"><a href="00001649.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001651.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001650.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



