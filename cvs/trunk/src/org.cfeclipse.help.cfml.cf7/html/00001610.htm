<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Creating a query object from a text file</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001609.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001611.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Creating a query object from a text file</h1>
<p>You can create a query object from a delimited text file by using the <a href="00000272.htm#1632966"><code>cfhttp</code></a> tag and specifying <code>method=&quot;Get&quot;</code> and the <code>name</code> attribute. This is a powerful method for processing and handling text files. After you create the query object, you can easily reference columns in the query and perform other ColdFusion operations on the data.</p>
<p>ColdFusion processes text files in the following manner:</p>
<ul>
<li>
   You can specify a field delimiter with the <code>delimiter</code> attribute. The default is a comma. 
</li>
<li>
   If data in a field might include the delimiter character, you must surround the entire field with the text qualifier character, which you can specify with the <code>textqualifier</code> attribute. The default text qualifier is the double-quotation mark (&quot;).
</li>
<li>
   The <code>textqualifier</code>=&quot;&quot; specifies that there is no text qualifier<code>. </code>If you use <code>textqualifier</code>=&quot;&quot;&quot;&quot; (four &quot; marks in a row), it explicitly specifies the double-quotation mark as the text qualifier<code>.</code>
</li>
<li>
   If there is a text qualifier, you must surround all field values with the text qualifier character.
</li>
<li>
   To include the text qualifier character in a field, use a double character. For example, if the text qualifier is &quot;, use &quot;&quot; to include a quotation mark in the field.
</li>
<li>
   The first row of text is always interpreted as column headings, so that row is skipped. You can override the file's column heading names by specifying a different set of names in the <code>columns</code> attribute. You must specify a name for each column. You then use these new names in your CFML code. However, ColdFusion never treats the first row of the file as data. 
</li>
<li>
   When duplicate column heading names are encountered, ColdFusion adds an underscore character to the duplicate column name to make it unique. For example, if two CustomerID columns are found, the second is renamed &quot;CustomerID_&quot;.
</li>
</ul>
<h4>To create a query from a text file:</h4>
<ol>
<li>
   Create a text file with the following content:
<pre>
OrderID,OrderNum,OrderDate,ShipDate,ShipName,ShipAddress
001,001,01/01/01,01/11/01,Mr. Shipper,123 Main Street
002,002,01/01/01,01/28/01,Shipper Skipper,128 Maine Street
</pre>
</li>
<li>
   Save the file as text.txt in the myapps directory under your <i>web_root</i>.
</li>
<li>
   Create a ColdFusion page with the following content:
<pre>
&lt;cfhttp method=&quot;Get&quot;
	url=&quot;http://127.0.0.1/myapps/text.txt&quot;
	name=&quot;juneorders&quot;
	textqualifier=&quot;&quot;&gt;

&lt;cfoutput query=&quot;juneorders&quot;&gt;
	OrderID: #OrderID#&lt;br&gt;
	Order Number: #OrderNum#&lt;br&gt;
	Order Date: #OrderDate#&lt;br&gt;
&lt;/cfoutput&gt;
&lt;!--- Now substitute different column names ---&gt;
&lt;!--- by using the columns attribute ---&gt;
&lt;hr&gt;
Now using replacement column names&lt;br&gt;

&lt;cfhttp method=&quot;Get&quot;
	url=&quot;http://127.0.0.1/myapps/text.txt&quot;
	name=&quot;juneorders&quot;
	columns=&quot;ID,Number,ODate,SDate,Name,Address&quot;
	textqualifier=&quot;&quot;&gt;

&lt;cfoutput query=&quot;juneorders&quot;&gt;
	Order ID: #ID#&lt;br&gt;
	Order Number: #Number#&lt;br&gt;
	Order Date: #SDate#&lt;br&gt;
&lt;/cfoutput&gt;
</pre>
</li>
<li>
   Save the file as query_textfile.cfm in the myapps directory under your <i>web_root</i> and view it in the web browser.
</li>
</ol>


<hr />
<p align="right"><p align="right"><a href="00001609.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001611.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001610.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



