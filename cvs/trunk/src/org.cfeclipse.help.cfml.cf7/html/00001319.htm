<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Indexing a path returned using a query</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001318.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001320.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Indexing a path returned using a query</h1>
<p>You can index a directory path to a document (or collection of documents) using a query by retrieving a row whose contents are a full directory path name. In this case, the key specifies the column that contains the complete directory path. Documents located in the directory path are indexed using the <code>cfindex</code> tag as if they were under the web server root folder.</p>
<p>In this example, the <code>type</code> attribute is set to <code>path</code>, and the <code>key</code> attribute is assigned the column name Project_Docs. The Project_Docs column contains directory paths, which Verity indexes as if they were specified as a fixed path pointing to a collection of documents without the use of a query.</p>
<h4>To index a directory path within a query:</h4>
<ol>
<li>
   Create a ColdFusion page that contains the following content:
<pre>
&lt;cfquery name=&quot;getEmps&quot; datasource=&quot;cfdocexamples&quot;&gt;
SELECT * FROM EMPLOYEE WHERE Emp_ID = 15
&lt;/cfquery&gt;
&lt;!--- Update the collection with the above query results. ---&gt;
&lt;!--- Key specifies a column that contains a directory path. ---&gt;
&lt;cfindex 
	query=&quot;getEmps&quot;
	collection=&quot;CodeColl&quot;
	action=&quot;update&quot;
	type=&quot;path&quot;
	key=&quot;Project_Docs&quot;
	title=&quot;Project_Docs&quot;
	body=&quot;Emp_ID,FirstName,LastName,Project_Docs&quot;&gt;

&lt;h2&gt;Indexing Complete&lt;/h2&gt;
&lt;p&gt;Your collection now includes the following items:&lt;/p&gt;
&lt;cfoutput query=&quot;getEmps&quot;&gt;
&lt;p&gt;#Emp_ID# #FirstName# #LastName# #Project_Docs#&lt;/p&gt;
&lt;/cfoutput&gt;
</pre>
</li>
<li>
   Save the file as indexdir.cfm in the myapps directory.
</li>
</ol>
<p>The ColdFusion <code>cfindex</code> tag indexes the contents of the specified directory path.</p>
<h4>To search and display the directory path:</h4>
<ol>
<li>
   Create a ColdFusion page that contains the following content:
<pre>
&lt;cfsearch 
	collection=&quot;#Form.collname#&quot;
	name=&quot;getEmps&quot;
	criteria=&quot;#Form.Criteria#&quot;
	maxrows = &quot;100&quot;&gt;

&lt;!--- Output the directory path contained in the record set. ---&gt;
&lt;cfoutput&gt;
Your search returned #getEmps.RecordCount# file(s).
&lt;/cfoutput&gt;

&lt;cfoutput query=&quot;getEmps&quot;&gt;
&lt;p&gt;&lt;table&gt;
	&lt;tr&gt;&lt;td&gt;Title: &lt;/td&gt;&lt;td&gt;#Title#&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Score: &lt;/td&gt;&lt;td&gt;#Score#&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Key: &lt;/td&gt;&lt;td&gt;#Key#&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Summary: &lt;/td&gt;&lt;td&gt;#Summary#&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Custom 1:&lt;/td&gt;&lt;td&gt;#Custom1#&lt;/td&gt;&lt;/tr&gt;
	&lt;tr&gt;&lt;td&gt;Column list: &lt;/td&gt;&lt;td&gt;#ColumnList#&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;/p&gt;
&lt;/cfoutput&gt;
</pre>
</li>
<li>
   Save the file as displaydir.cfm.
</li>
</ol>


<hr />
<p align="right"><p align="right"><a href="00001318.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001320.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001319.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



