<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Managing the application with Application.cfc</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001117.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001119.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Managing the application with Application.cfc</h1>
<p>You use the <code>onApplicationStart</code> and <code>onApplicationEnd</code> methods to configure and manage the application; that is, to control resources that are used by multiple pages and requests and must be consistently available to all code in your application. Such resources can include data sources, application counters such as page hit variables, or style information for all pages.</p>
<p>The <code>onApplicationStart</code> method executes when ColdFusion MX gets the first request for a page in the application after the server starts. The <code>onApplicationEnd</code> method executes when the application server shuts down or if the application is inactive for the application time-out period.</p>
<p>The following sections describe some of the ways you can use these methods. For more information, see entries for <a href="00000696.htm#1188381"><code>onApplicationStart</code></a> and <a href="00000695.htm#1188612"><code>onApplicationEnd</code></a> in <i>CFML Reference</i>.</p>
<h3><a name="wp1195570"></a>Defining application utility functions</h3>
<p>Functions that you define in Application.cfc and do not put in a shared scope are, by default, available only to other methods in the CFC. </p>
<p>If your Application.cfc implements the <code>onRequest</code> method, any utility functions that you define in Application.cfc are also directly available in to the target page, because Application.cfc and the target page share the Variables scope.</p>
<p>If your application requires utility functions that are used by multiple pages, not just by the methods in Application.cfc, and you do not use an <code>onRequest</code> method, Macromedia recommends that you put them in a separate CFC and access them by invoking that CFC. As with other ColdFusion pages, Application.cfc can access any CFC in a directory path that is configured on the ColdFusion MX Administrator Mappings page. You can, therefore, use this technique to share utility functions across applications.</p>
<p>If your Application.cfc defines utility functions that you want available on request pages and does not use an <code>onRequest</code> method, you must explicitly put the functions in a ColdFusion MX scope, such as the Request scope, as the following code shows:</p>
<pre>&lt;cffunction name=&quot;<i>theFunctionName</i>&quot; returntype=&quot;<i>theReturnType</i>&quot;&gt;
   &lt;!--- Function definition goes here.<i> ---&gt;</i>
&lt;/cffunction&gt;

&lt;cffunction name=&quot;OnRequestStart&quot;&gt;
   &lt;!--- <code>OnRequestStart</code> body goes here<i> ---&gt;</i>
      &lt;cfset Request.<i>theFunctionName</i>=This.<i>theFunctionName</i>&gt;
&lt;/cffunction&gt;
</pre><p>On the request page, you would include the following code:</p>
<pre>&lt;cfset myVar=Request.<i>theFunctionName</i>(<i>Argument1</i>...)&gt;
</pre><p>Functions that you define in this manner share the This scope and Variables scope with the Application.cfc file for the request.</p>
<h3><a name="wp1202485"></a>Setting application default variables and constants in onApplicationStart</h3>
<p>You can set default variables and application-level constants in Application.cfc. For example, you can do the following:</p>
<ul>
<li>
   Specify a data source and ensure that it is available
</li>
<li>
   Specify domain name
</li>
<li>
   Set styles, such as fonts or colors
</li>
<li>
   Set other application-level variables
</li>
</ul>
<p>You do not have to lock Application scope variables when you set them in the Application.cfc <code>onApplicationStart</code> method.</p>
<p>For details on implementing the <code>onApplicationStart</code> method, see <a href="00000696.htm#1188381"><code>onApplicationStart</code></a> in <i>CFML Reference</i>.</p>
<h3><a name="wp1194081"></a>Using the onApplicationEnd method</h3>
<p>Use the <code>onApplicationEnd</code> method for any clean-up activities that your application requires when it shuts down, such as saving data in memory to a database, or to log the application end. You cannot use this method to display data on a user page, because it is not associated with any request. The application ends, even if this method throws an exception. An application that is used often is unlikely to execute this method, except when the server is shut down. </p>
<p>For details on implementing the <code>onApplicationEnd</code> method, see <a href="00000695.htm#1188612"><code>onApplicationEnd</code></a> in <i>CFML Reference</i>.</p>


<hr />
<p align="right"><p align="right"><a href="00001117.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001119.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001118.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



