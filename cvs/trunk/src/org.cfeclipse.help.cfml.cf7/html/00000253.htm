<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>cffile action = &quot;upload&quot;</title>
</head>
<body>
<p align="right"><p align="right"><a href="00000252.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000254.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>cffile action = &quot;upload&quot;</h1>
<h4><a name="wp3540092"></a>Description</h4>
<p>Copies a file to a directory on the server. </p>
<h4><a name="wp3540094"></a>Syntax</h4>
<pre>&lt;cffile <br />   action = &quot;upload&quot;<br />   fileField = &quot;formfield&quot;<br />   destination = &quot;full_path_name&quot;<br />   nameConflict = &quot;behavior&quot;<br />   accept = &quot;mime_type/file_type&quot;<br />   mode = &quot;permission&quot;<br />   attributes = &quot;file_attribute_or_list&quot;&gt;<br />   result = &quot;result_name&quot;
</pre><h4><a name="wp3540096"></a>See also</h4>
<p><a href="00000235.htm#1097918"><code>cfdirectory</code></a></p>
<h4><a name="wp3540101"></a>History</h4>
<p>See the History section of the main <a href="00000245.htm#1098395"><code>cffile</code></a> tag page.</p>
<h4><a name="wp3540106"></a>Attributes</h4>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Attribute
    </th>
    <th>
Req/Opt
    </th>
    <th>
Default
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>action </p>
    </td>
    <td>
<p>Required</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Type of file manipulation that the tag performs. </p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>fileField</p>
    </td>
    <td>
<p>Required</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Name of form field used to select the file. </p>
<p>Do not use number signs (#) to specify the field name. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>destination</p>
    </td>
    <td>
<p>Required</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Pathname of directory in which to upload the file. If not an absolute path (starting a with a drive letter and a colon, or a forward or backward slash), it is relative to the ColdFusion temporary directory, which is returned by the <a href="00000497.htm#1105302">GetTempDirectory</a> function.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>nameConflict</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>Error</p>
    </td>
    <td>
<p>Action to take if filename is the same as that of a file in the directory.</p>
<ul>
<li>
   Error: file is not saved. ColdFusion stops processing the page and returns an error.
</li>
<li>
   Skip: file is not saved. This option permits custom behavior based on file properties.
</li>
<li>
   Overwrite: replaces file.
</li>
<li>
   MakeUnique: forms a unique filename for the upload; name is stored in the file object variable <code>serverFile</code>. 
</li>
</ul>
    </td>
  </tr>
  <tr>
    <td>
<p>accept</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Limits the MIME types to accept. Comma-delimited list. For example, to permit JPEG and Microsoft Word file uploads:</p>
<p><code>accept</code> <code>=</code> <code>&quot;image/jpg, application/msword&quot;</code></p>
<p>The browser uses file extension to determine file type.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>mode</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Applies only to UNIX and Linux. Permissions. Octal values of chmod command. Assigned to owner, group, and other, respectively. For example:</p>
<ul>
<li>
   644: assigns read/write permission to owner; read permission to group and other.
</li>
<li>
   777: assigns read/write/execute permission to all.
</li>
</ul>
    </td>
  </tr>
  <tr>
    <td>
<p>attributes</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Applies to Windows. A comma-delimited list of attributes to set on the file.</p>
<p>If omitted, the file&#39;s attributes are maintained.</p>
<p>Each value must be specified explicitly. For example, if you specify <code>attributes</code> <code>=</code> <code>&quot;readOnly&quot;</code>, all other attributes are overwritten. </p>
<ul>
<li>
   readOnly
</li>
<li>
   hidden
</li>
<li>
   normal (if you use this option with other attributes, it is overridden by them)
</li>
</ul>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>result</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Allows you to specify a name for the variable in which <code>cffile</code> returns the result (or status) parameters. If you do not specify a value for this attribute, <code>cffile</code> uses the prefix 'cffile'. For more information, see the Usage section.</p>
    </td>
  </tr>
</table>

<h4><a name="wp3540187"></a>Usage</h4>
<p>After a file upload is completed, you can get status information using file upload parameters. To refer to parameters, use either the <code>cffile</code> prefix or, if you specified an alternate name in the <code>result</code> attribute, the name you specified there. For example, if you did not specify a name in the <code>result</code> attribute, access the <code>fileExisted</code> parameter as <code>#cffile.fileExisted#</code>. If you set the <code>result</code> attribute to <code>myResult</code>, however, access <code>fileExisted</code> as <code>#myResult.fileExisted#</code>. </p>
<p>Status parameters can be used anywhere that other ColdFusion parameters can be used. </p>
<p><strong>Tip: </strong>The <code>result</code> attribute allows functions or CFCs that get called from multiple pages at the same time to avoid overwriting the results of one call with another.</p><p><strong>Note: </strong>The <code>file</code> prefix is deprecated, in favor of the <code>cffile</code> prefix. Do not use the <code>file</code> prefix in new applications.</p><p><strong>Tip: </strong>If your page is uploading a file that was selected on a form or was otherwise sent to your page via a multipart/form-data HTTP message, you can determine the approximate size of the file by checking the value of the <code>CGI.content_length</code> variable. This variable includes the file length plus the length of any other request content.</p><p>The following file upload status parameters are available after an upload:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Parameter 
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>attemptedServerFile</p>
    </td>
    <td>
<p>Initial name ColdFusion used when attempting to save a file</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>clientDirectory </p>
    </td>
    <td>
<p>Directory location of the file uploaded from the client's system</p>
    </td>
  </tr>
  <tr>
    <td>
<p>clientFile </p>
    </td>
    <td>
<p>Name of the file uploaded from the client's system</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>clientFileExt</p>
    </td>
    <td>
<p>Extension of the uploaded file on the client system (without a period)</p>
    </td>
  </tr>
  <tr>
    <td>
<p>clientFileName</p>
    </td>
    <td>
<p>Name of the uploaded file on the client system (without an extension)</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>contentSubType</p>
    </td>
    <td>
<p>MIME content subtype of the saved file</p>
    </td>
  </tr>
  <tr>
    <td>
<p>contentType</p>
    </td>
    <td>
<p>MIME content type of the saved file</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>dateLastAccessed </p>
    </td>
    <td>
<p>Date and time the uploaded file was last accessed</p>
    </td>
  </tr>
  <tr>
    <td>
<p>fileExisted</p>
    </td>
    <td>
<p>Whether the file already existed with the same path (yes or no)</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>fileSize </p>
    </td>
    <td>
<p>Size of the uploaded file</p>
    </td>
  </tr>
  <tr>
    <td>
<p>fileWasAppended </p>
    </td>
    <td>
<p>Whether ColdFusion appended uploaded file to a file (yes or no)</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>fileWasOverwritten</p>
    </td>
    <td>
<p>Whether ColdFusion overwrote a file (yes or no)</p>
    </td>
  </tr>
  <tr>
    <td>
<p>fileWasRenamed </p>
    </td>
    <td>
<p>Whether uploaded file renamed to avoid a name conflict (yes or no)</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>fileWasSaved </p>
    </td>
    <td>
<p>Whether ColdFusion saves a file (yes or no)</p>
    </td>
  </tr>
  <tr>
    <td>
<p>oldFileSize</p>
    </td>
    <td>
<p>Size of a file that was overwritten in the file upload operation</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>serverDirectory</p>
    </td>
    <td>
<p>Directory of the file saved on the server</p>
    </td>
  </tr>
  <tr>
    <td>
<p>serverFile </p>
    </td>
    <td>
<p>Filename of the file saved on the server</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>serverFileExt </p>
    </td>
    <td>
<p>Extension of the uploaded file on the server (without a period)</p>
    </td>
  </tr>
  <tr>
    <td>
<p>serverFileName</p>
    </td>
    <td>
<p>Name of the uploaded file on the server (without an extension)</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>timeCreated </p>
    </td>
    <td>
<p>Time the uploaded file was created</p>
    </td>
  </tr>
  <tr>
    <td>
<p>timeLastModified</p>
    </td>
    <td>
<p>Date and time of the last modification to the uploaded file</p>
    </td>
  </tr>
</table>

<p><strong>Note: </strong>File status parameters are read-only. They are set to the results of the most recent <code>cffile</code> operation. If two <code>cffile</code> tags execute, the results of the second overwrite the first, unless you have specified a different result variable in the <code>result</code> attribute.</p><h4><a name="wp3540283"></a>Example</h4>
<p>The following example creates a unique filename, if there is a name conflict when the file is uploaded on Windows: </p>
<pre>&lt;!--- Windows Example ---&gt;
&lt;!--- Check to see if the Form variable exists. ---&gt;
&lt;cfif isDefined(&quot;Form.FileContents&quot;) &gt;
   &lt;!--- If TRUE, upload the file. ---&gt;
   &lt;cffile action = &quot;upload&quot; 
      fileField = &quot;FileContents&quot; 
      destination = &quot;c:\files\upload\&quot; 
      accept = &quot;text/html&quot; 
      nameConflict = &quot;MakeUnique&quot;&gt;
&lt;cfelse&gt;
   &lt;!--- If FALSE, show the Form. ---&gt;
   &lt;form method=&quot;post&quot; action=&lt;cfoutput&gt;#cgi.script_name#&lt;/cfoutput&gt; 
      name=&quot;uploadForm&quot; enctype=&quot;multipart/form-data&quot;&gt;
      &lt;input name=&quot;FileContents&quot; type=&quot;file&quot;&gt;
      &lt;br&gt;
      &lt;input name=&quot;submit&quot; type=&quot;submit&quot; value=&quot;Upload File&quot;&gt; 
   &lt;/form&gt;
&lt;/cfif&gt;
</pre>

<hr />
<p align="right"><p align="right"><a href="00000252.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000254.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00000253.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



