<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Configuring an SMS event gateway </title>
</head>
<body>
<p align="right"><p align="right"><a href="00001670.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001672.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Configuring an SMS event gateway </h1>
<p>You provide SMS-specific configuration information to the SMS event gateway in a configuration file. You specify the configuration file location when you configure the SMS event gateway instance in the ColdFusion MX Administrator. ColdFusion provides a sample SMS event gateway configuration file in <i>cf_root</i>\WEB-INF\cfusion\gateway\config\sms-test.cfg on J2EE configurations, and <i>cf_root</i>\gateway\config\sms-test.cfg on server configurations. The configuration file contents is describe in the following table. </p>
<p><strong>Note: </strong>The following configuration information describes the configuration fields, but does not include detailed explanations of SMPP-specific terminology, listings of all valid values of properties that are defined in the SMPP specification, or explanations of how to select appropriate SMPP-specific values for your application. For further information, see documentation on the SMPP 3.4 protocol at <a href="http://www.smsforum.net/" target="mm_window"></a>www.smsforum.net/ and other publicly available documentation.</p><p><strong>Note: </strong>Your SMS service provider might specify requirements for several of these configuration values. Consult the provider documentation.</p><table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Property
    </th>
    <th>
Default
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>ip-address</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>IP address of the SMSC, as specified by the SMPP provider. For the ColdFusion SMS test server, you normally use 127.0.0.1.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>port</p>
    </td>
    <td>
<p>0</p>
    </td>
    <td>
<p>Port number to bind to on the SMSC. The ColdFusion SMS test server uses port 7901.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>system-id</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Name that identifies the event gateway to the SMSC, as established with the SMPP provider. To connect to the ColdFusion SMS test server, the system-id must be cf.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>password</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Password for authenticating the event gateway to the SMSC. To connect to the ColdFusion SMS test server, the password must be cf.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>source-ton</p>
    </td>
    <td>
<p>1</p>
    </td>
    <td>
<p>Type of Number (TON) of the source address, that is, of the address that the event gateway uses for outgoing messages, as specified in the SMPP specification. Values include 0, unknown; 1, international number; 2, national number.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>source-npi</p>
    </td>
    <td>
<p>1</p>
    </td>
    <td>
<p>Numeric Plan Indicator (NPI) of the source address as specified in the SMPP specification. Values include 0, unknown; 1, ISDN.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>source-address</p>
    </td>
    <td>
<p>empty string</p>
    </td>
    <td>
<p>Address (normally, a phone number) of the event gateway. Identifies the sender of outgoing messages to the SMSC.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>addr-ton</p>
    </td>
    <td>
<p>1</p>
    </td>
    <td>
<p>TON for the incoming addresses that this event gateway serves.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>addr-npi</p>
    </td>
    <td>
<p>1</p>
    </td>
    <td>
<p>NPI for the incoming addresses that this event gateway serves.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>address-range</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>The range of incoming addresses (phone numbers) that remote devices can use to send messages to the event gateway instance; often, the same as the <code>source-address</code>.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>message-rate</p>
    </td>
    <td>
<p>100</p>
    </td>
    <td>
<p>Integer or decimal value that specifies the number of messages the gateway is allowed to send to your service provider per second. 0 is unlimited.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>mode</p>
    </td>
    <td>
<p>synchronous</p>
    </td>
    <td>
<p>Message transmission mode:</p>
<ul>
<li>
   synchronous&#160;The gateway waits for the response from the server when sending a message. In this mode, the <code>SendGatewayMessage</code> CFML function returns the SMS <code>messageID</code> of the message, or an empty string if there is an error.
</li>
<li>
   asynchronous&#160;The gateway does not wait for a response. In this mode, the <code>SendGatewayMessage</code> CFML function always returns an empty string.
</li>
</ul>
    </td>
  </tr>
  <tr>
    <td>
<p>network-retry</p>
    </td>
    <td>
<p>no</p>
    </td>
    <td>
<p>Gateway behavior when a network error occurs while trying to deliver a message:</p>
<ul>
<li>
   yes&#160;The gateway queues the message for delivery when the gateway is able to rebind to the SMSC. Retrying is useful if the gateway is in asynchronous mode, where the CFML <code>SendGatewayMessage</code> function does not return an error.
</li>
<li>
   no&#160;The gateway does not retry sending the message.
</li>
</ul>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>transient-retry</p>
    </td>
    <td>
<p>no</p>
    </td>
    <td>
<p>Gateway behavior when the SMSC returns an error that indicates a transient error, where it may be able to accept the message in the future:</p>
<ul>
<li>
   yes&#160;The gateway attempts to resend the message. Retrying is useful if the gateway is in asynchronous mode, where the CFML <code>SendGatewayMessage</code> function does not return an error.
</li>
<li>
   no&#160;The gateway does not retry sending the message.
</li>
</ul>
    </td>
  </tr>
  <tr>
    <td>
<p>cfc-method</p>
    </td>
    <td>
<p>onIncomingMessage</p>
    </td>
    <td>
<p>Listener CFC method for ColdFusion to invoke when the gateway gets incoming messages.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>destination-ton</p>
    </td>
    <td>
<p>1</p>
    </td>
    <td>
<p>Default TON of addresses for outgoing messages.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>destination-npi</p>
    </td>
    <td>
<p>1</p>
    </td>
    <td>
<p>Default NPI of addresses for outgoing messages.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>service-type</p>
    </td>
    <td>
<p>empty string</p>
    </td>
    <td>
<p>Type of messaging service; can be empty or one of the following values: CMT, CPT, VMN, VMA, WAP, or USSD.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>system-type</p>
    </td>
    <td>
<p>empty string</p>
    </td>
    <td>
<p>Type of system (ESME, External Short Message Entity ); used when binding to the SMSC. Some SMSCs might be able to send responses that are specific to a given type of ESME. Normally, should be set to SMPP.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>receive-timeout</p>
    </td>
    <td>
<p>-1 (do not time out)</p>
    </td>
    <td>
<p>The time-out, in seconds, for trying to receive a message from the SMSC after it establishes a connection. To wait indefinitely until a message is received, set the <code>receive-timeout</code> to -1.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>ping-interval</p>
    </td>
    <td>
<p>60</p>
    </td>
    <td>
<p>Number of seconds between EnquireLink messages that the event gateway sends to the server to verify the health of the connection.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>retries</p>
    </td>
    <td>
<p>-1 (try forever)</p>
    </td>
    <td>
<p>Number of times to retry connecting to the SMSC to send a message before the gateway goes into a failed state. If the gateway is in a failed state, the <code>getStatus</code> method returns FAILED, and theColdFusion&#160;MX Administrator shows the gateway status as Failed. The gateway must be restarted before it can be used. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>retry-interval</p>
    </td>
    <td>
<p>10</p>
    </td>
    <td>
<p>Number of seconds between connection retries.</p>
    </td>
  </tr>
</table>

<p>You can also set the following values in each outgoing message: source-ton, source-npi, source-address, destination-ton, destination-npi, and service-type. The message field names differ from the configuration file property names.</p>


<hr />
<p align="right"><p align="right"><a href="00001670.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001672.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001671.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



