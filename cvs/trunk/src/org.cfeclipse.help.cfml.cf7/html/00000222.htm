<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>cfcache</title>
</head>
<body>
<p align="right"><p align="right"><a href="00000221.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000223.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>cfcache</h1>
<h4><a name="wp1344636"></a>Description</h4>
<p>Stores a copy of a page on the server and/or client computer, to improve page rendering performance. To do this, the tag creates temporary files that contain the static HTML returned from a ColdFusion page.</p>
<p>Use this tag if it is not necessary to get dynamic content each time a user accesses a page. </p>
<p>You can use this tag for simple URLs and for URLs that contain URL parameters.</p>
<h4><a name="wp1870278"></a>Category</h4>
<p><a href="00000207.htm#2460108">Page processing tags</a></p>
<h4><a name="wp1097535"></a>Syntax</h4>
<pre>&lt;cfcache <br />   action = &quot;action&quot;<br />   directory = &quot;directory_name&quot;<br />   timespan = &quot;value&quot;<br />   expireURL = &quot;wildcarded_URL_reference&quot;<br />   username = &quot;username&quot;<br />   password = &quot;password&quot;<br />   port = &quot;port_number&quot;<br />   protocol = &quot;protocol&quot;&gt;
</pre><h4><a name="wp1872508"></a>See also</h4>
<p><a href="00000255.htm#2130748"><code>cfflush</code></a><code>, </code><a href="00000270.htm#1355655"><code>cfheader</code></a><code>, </code><a href="00000271.htm#1099843"><code>cfhtmlhead</code></a><code>, </code><a href="00000335.htm#1103514"><code>cfsetting</code></a><code>, </code><a href="00000336.htm#1103549"><code>cfsilent</code></a></p>
<h4><a name="wp3136611"></a>History</h4>
<p>ColdFusion&#160;MX: </p>
<ul>
<li>
   Deprecated the <code>cachedirectory</code> and <code>timeout</code> attributes. They might not work, and might cause an error, in later releases. 
</li>
<li>
   Added the <code>timespan</code> attribute. 
</li>
<li>
   Changed how pages are cached: the default <code>action</code> attribute value, <code>cache</code>, caches a page on the server and the client. (In earlier releases, this option cached a page only on the server.) 
</li>
<li>
   Changed the source of the <code>protocol</code> and <code>port</code> values: the default <code>protocol</code> and <code>port</code> values are now taken from the current page URL. (In earlier releases, they were <code>&quot;http&quot;</code> and <code>&quot;80&quot;</code>, respectively.) 
</li>
<li>
   Changed how session state is handled when caching a page: this tag can cache pages that depend on session state, including pages that are secured with a ColdFusion login. (In earlier releases, the session state was cleared when caching the page, causing authentication to be lost.)
</li>
<li>
   Changed how files are cached: this tag uses a hash() of the URL for the filename to cache a file. (In earlier releases, ColdFusion used the cfcache.map file.)
</li>
</ul>
<h4><a name="wp2207633"></a>Attributes</h4>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Attribute
    </th>
    <th>
Req/Opt
    </th>
    <th>
Default
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>action</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>cache</p>
    </td>
    <td>
<ul>
<li>
   cache: server-side and client-side caching.
</li>
<li>
   flush: refresh cached page(s). 
</li>
<li>
   clientcache: browser-side caching only. To cache a personalized page, use this option.
</li>
<li>
   servercache: server-side caching only. Not recommended.
</li>
<li>
   optimal: same as &quot;cache&quot;. 
</li>
</ul>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>directory</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>cf_root/cache </p>
    </td>
    <td>
<p>Absolute path of cache directory. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>timespan</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>Page is flushed only when <code>cfcache action</code> <code>=</code> <code>&quot;flush&quot;</code> is executed</p>
    </td>
    <td>
<p>The interval until the page is flushed from the cache. </p>
<ul>
<li>
   A decimal number of days. For example:
<ul><li>	- &quot;.25&quot;, for one-fourth day (6 hours)</li>
<li>	- &quot;1&quot;, for one day</li>
<li>	- &quot;1.5&quot;, for one and one half days</li>
</ul></li>
<li>
   A return value from the <a href="00000435.htm#1102715">CreateTimeSpan</a> function; for example, <code>&quot;#CreateTimeSpan(0,</code> <code>6,</code> <code>0,</code> <code>0)#&quot;.</code>
</li>
</ul>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>expireURL</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>Flush all cached pages</p>
    </td>
    <td>
<p>Used with <code>action</code> <code>=</code> <code>&quot;flush&quot;</code>. A URL reference. ColdFusion matches it against the mappings in the specified cache directory. Can include wildcards. For example: <code>&quot;*/view.cfm?id=*&quot;</code>. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>username</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>A username. Provide this if the page requires authentication at the web server level.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>password</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>A password. Provide this if the page requires authentication at the web server level.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>port</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>The current page port</p>
    </td>
    <td>
<p>Port number of the web server from which the URL is requested. In the internal call from <code>cfcache</code> to <code>cfhttp</code>, ColdFusion resolves each URL variable in the page; this ensures that links in the page remain functional. </p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>protocol</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>The current page protocol</p>
    </td>
    <td>
<p>Protocol that is used to create URL from cache.</p>
<ul>
<li>
   http:// 
</li>
<li>
   https://
</li>
</ul>
    </td>
  </tr>
</table>

<h4><a name="wp1454780"></a>Usage</h4>
<p>Use this tag in pages whose content is not updated frequently. Taking this action can greatly improve the performance of your application.</p>
<p>The output of a cached page is stored in a file on the client browser and/or the ColdFusion server. Instead of regenerating and downloading the output of the page each time it is requested, ColdFusion uses the cached output. ColdFusion regenerates and downloads the page only when the cache is flushed, as specified by the <code>timespan</code> attribute, or by invoking <code>cfcache action=flush</code>.</p>
<p>To enable a simple form of caching, put a <code>cfcache</code> tag, specifying the <code>timespan</code> attribute, at the top of a page. Each time the specified time span passes, ColdFusion flushes (deletes) the copy of the page from the cache and caches a new copy for users to access.</p>
<p>You can specify client-side caching or a combination of client-side and server-side caching (the default), using the action attribute. The advantage of client-side caching is that it requires no ColdFusion resources; the browser stores pages in its own cache, improving performance. The advantage of combination caching is that it optimizes server performance; if the browser does not have a cache of the page, the server can get data from its own cache. (Macromedia recommends that you do not use server-side only caching. Macromedia recommends that you use combination caching.)</p>
<p>If a page contains personalized content, use the <code>action = &quot;clientcache&quot;</code> option to avoid the possibility of caching a personalized copy of a page for other users.</p>
<p>Debug settings have no effect on <code>cfcache</code> unless the application page enables debugging. When generating a cached file, <code>cfcache</code> uses <code>cfsetting showDebugOutput = &quot;no&quot;</code>.</p>
<p>The cfcache tag evaluates each unique URL, including URL parameters, as a distinct page, for caching purposes. For example, the output of http://server/view.cfm?id=1 and the output of http://server/view.cfm?id=2 are cached separately.</p>
<p>The <code>cfcache</code> tag uses the <code>cfhttp</code> tag to get the contents of a page to cache. If there is an HTTP error accessing the page, the contents are not cached. If a ColdFusion error occurs, the error is cached.</p>
<p>For more information, see <a href="00001126.htm#1172150">Caching ColdFusion pages that change infrequently</a> in <a href="00001125.htm#1164436">Optimizing ColdFusion applications</a> in <i>ColdFusion MX Developer's Guide</i>.</p>
<h4><a name="wp1097587"></a>Example</h4>
<pre>&lt;!--- This example produces as many cached files as there are 
URL parameter permutations. You can see that the page is cached when the
timestamp doesn&#39;t change.---&gt;

&lt;cfcache
timespan=&quot;#createTimeSpan(0,0,10,0)#&quot;&gt;
&lt;body&gt;

&lt;h3&gt;This is a test of some simple output&lt;/h3&gt;

&lt;cfoutput&gt;
This page was generated at #now()#&lt;br&gt;
&lt;/cfoutput&gt;

&lt;cfparam name = &quot;URL.x&quot; default = &quot;no URL parm passed&quot; &gt;
&lt;cfoutput&gt;The value of URL.x = # URL.x #&lt;/cfoutput&gt; 
</pre>

<hr />
<p align="right"><p align="right"><a href="00000221.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000223.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00000222.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



