<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Publishing web services that use complex data types</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001554.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001556.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Publishing web services that use complex data types</h1>
<p>The two ColdFusion data types that do not map exactly to WSDL data types are struct and query. When you publish a ColdFusion web service that uses parameters of type struct or query, the consuming application needs to be able to handle the data. </p>
<p><strong>Note: </strong>If the consumer of a ColdFusion web service is another ColdFusion application, you do not have to perform any special processing. ColdFusion correctly maps struct and query data types in the web service publisher with the consumer. For more information, see <a href="00001545.htm#1220008">Consuming ColdFusion web services</a>. </p><h3><a name="wp1187309"></a>Publishing structures</h3>
<p>A ColdFusion structure can hold an unlimited number of key-value pairs where the values can be of any ColdFusion data type. While it is a very useful and powerful way to represent data, it cannot be directly mapped to any XML data types defined in the SOAP 1.1 encoding and XML Schema specification. Therefore, ColdFusion structures are treated as a custom type and the complex type XML schema in WSDL looks like the following:</p>
<pre>&lt;complexType name=&quot;mapItem&quot;&gt;
&#160;&#160;&lt;sequence&gt;
&#160;&#160;&#160;&#160;&lt;element name=&quot;key&quot; nillable=&quot;true&quot; type=&quot;xsd:anyType&quot;/&gt;
&#160;&#160;&#160;&#160;&lt;element name=&quot;value&quot; nillable=&quot;true&quot; type=&quot;xsd:anyType&quot;/&gt;
&#160;&#160;&lt;/sequence&gt;
&lt;/complexType&gt;
&lt;complexType name=&quot;Map&quot;&gt;
&#160;&#160;&lt;sequence&gt;
&#160;&#160;&#160;&#160;&lt;element maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot; name=&quot;item&quot; type=&quot;apachesoap:mapItem&quot;/&gt;
&#160;&#160;&lt;/sequence&gt;
&lt;/complexType&gt;
</pre><p>This complex type defines a representation of a structure, where the structure keys and values can be any type. </p>
<p>In the WSDL mapping of a ColdFusion structure, each key-value pair in the structure points to the next element in the structure except for the final field, which contains a value. Use dot notation to access the key-value pairs.</p>
<h3><a name="wp1198624"></a>Publishing queries</h3>
<p>ColdFusion publishes query data types as the WSDL type QueryBean. The QueryBean data type contains two elements, as the following excerpt from a WSDL file shows: </p>
<pre>&lt;<code><strong>complexType name=&quot;QueryBean&quot;</strong></code>&gt; 
   &lt;all&gt; 
      &lt;element name=&quot;data&quot; nillable=&quot;true&quot; type=&quot;intf:<code><strong>ArrayOf_SOAP-ENC_Array</strong></code>&quot; /&gt; 
      &lt;element name=&quot;ColumnList&quot; nillable=&quot;true&quot;<br />type=&quot;intf:<code><strong>ArrayOf_SOAP-ENC_string</strong></code>&quot; /&gt; 
   &lt;/all&gt; 
<code><strong>&lt;/complexType&gt;</strong></code> 
</pre><p>The following table describes the elements of QueryBean:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Element name
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>ColumnList</p>
    </td>
    <td>
<p>String array that contains column names</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>data</p>
    </td>
    <td>
<p>Two-dimensional array that contains query data</p>
    </td>
  </tr>
</table>

<p>The WSDL file for a QueryBean defines these elements as follows: </p>
<pre><strong>&lt;complexType name=&quot;ArrayOf_SOAP-ENC_Array&quot;&gt; </strong>
   &lt;complexContent&gt; 
      &lt;restriction base=&quot;SOAP-ENC:Array&quot;&gt; 
         &lt;attribute ref=&quot;SOAP-ENC:arrayType&quot; wsdl:arrayType=&quot;SOAP-ENC:Array[]&quot; /&gt; 
      &lt;/restriction&gt; 
   &lt;/complexContent&gt; 
<strong>&lt;/complexType&gt; </strong>
<strong>&lt;complexType name=&quot;ArrayOf_SOAP-ENC_string&quot;&gt; </strong>
   &lt;complexContent&gt; 
   &lt;restriction base=&quot;SOAP-ENC:Array&quot;&gt; 
      &lt;attribute ref=&quot;SOAP-ENC:arrayType&quot; wsdl:arrayType=&quot;xsd:string[]&quot; /&gt; 
   &lt;/restriction&gt; 
   &lt;/complexContent&gt; 
<strong>&lt;/complexType&gt; </strong>
</pre>

<hr />
<p align="right"><p align="right"><a href="00001554.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001556.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001555.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



