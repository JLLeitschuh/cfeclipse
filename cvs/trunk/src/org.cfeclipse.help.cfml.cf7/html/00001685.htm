<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Event gateway architecture</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001684.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001686.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Event gateway architecture</h1>
<p>A ColdFusion event gateway listens for events and passes them to ColdFusion for handling by the application's listener CFC or CFCs. It must implement the coldfusion.eventgateway.Gateway interface, and use the ColdFusion GatewayServices class. The following figure expands on the basic event handling architecture diagram to show how a ColdFusion event gateway works:</p>
<p><br />
<img src="images/gatewayd.jpg" alt="Structure of a gateway" border="0" hspace="0" vspace="0"/>
<br />
</p>
<p><strong>Receiving messages</strong>&#160;The event gateway listener thread receives events from an external event source such as a socket or SMSC server, and calls the GatewayServices <code>addEvent</code> method to send a <code>CFEvent</code> instance to ColdFusion.</p>
<p><strong>Sending messages</strong>&#160;The ColdFusion event gateway service calls the event gateway's <code>outgoingMessage</code> method and passes it a CFEvent instance with the destination and message information. The event gateway forwards the message as appropriate to the external receiver.</p>
<p>The event gateway architecture is not limited to handling messages from external sources, such as SMS devices or IM clients. It can also be used to handle events that are internal to the local system or even the ColdFusion application. Also, a gateway does not have to implement two-way communications. </p>
<p>The sample directory watcher gateway provided with ColdFusion MX is an example of an internal, one way, gateway. It has a single thread that periodically checks a local directory and sends a message to a CFC when the directory contents change. This gateway does not support outgoing messages. (The code for this gateway is in the gateway/src/examples/watcher directory.) </p>
<p>Another internal gateway, the asynchronous CFML gateway, is provided as part of the ColdFusion product. Unlike most gateways, it does not have a listener thread. Its <code>outgoingMessage</code> method gets messages from CFML <code>SendGatewayMessage</code> functions, and dispatches them to a CFC <code>onIncomingMessage</code> method for handling. This gateway lets ColdFusion support request-free asynchronous processing. For more information on using this gateway, see <a href="00001647.htm#137326">Using the CFML event gateway for asynchronous CFCs</a>.</p>


<hr />
<p align="right"><p align="right"><a href="00001684.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001686.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001685.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



