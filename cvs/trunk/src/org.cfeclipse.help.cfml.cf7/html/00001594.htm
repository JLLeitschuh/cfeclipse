<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>How ColdFusion sends mail</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001593.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001595.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>How ColdFusion sends mail</h1>
<p>The ColdFusion implementation of SMTP mail uses a spooled architecture. If you select to spool mail on the Mail page in the ColdFusion&#160;MX Administrator, when an application page processes a <a href="00000297.htm#2355015"><code>cfmail</code></a> tag, the messages that are generated are not sent immediately. Instead, they are spooled to disk and processed in the background. This architecture has two advantages:</p>
<ul>
<li>
   End users of your application are not required to wait for SMTP processing to complete before a page returns to them. This design is especially useful when a user action causes more than a handful of messages to be sent.
</li>
<li>
   Messages sent using <code>cfmail</code> are delivered reliably, even in the presence of unanticipated events like power outages or server crashes.
</li>
</ul>
<p>You can set how frequently ColdFusion&#160;MX checks for spooled mail messages on the Mail page in the ColdFusion&#160;MX Administrator. If ColdFusion is extremely busy or has a large existing queue of messages, however, delivery can occur after the spool interval.</p>
<p>Some ColdFusion MX editions have advanced spooling options that let you fine tune how ColdFusion sends mail. For more information, see <i>Configuring and Administering ColdFusion&#160;MX</i>.</p>
<h2><a name="wp1126824"></a>Error logging and undelivered messages</h2>
<p>ColdFusion logs all errors that occur during SMTP message processing to the file mail.log in the ColdFusion log directory. The log entries contain the date and time of the error as well as diagnostic information about why the error occurred.</p>
<p>If a message is not delivered because of an error, ColdFusion writes it to this directory:</p>
<ul>
<li>
   In Windows: \CFusionMX7\Mail\Undelivr 
</li>
<li>
   On UNIX: /opt/coldfusionmx7/mail/undelivr 
</li>
</ul>
<p>The error log entry that corresponds to the undelivered message contains the name of the file written to the UnDelivr (or undelivr) directory. </p>
<p><strong>Note: </strong>To have ColdFusion try to resend a message that it could not deliver, move the message file from the Undelivr directory to the Spool directory. </p><p>For more information about the mail logging settings in the ColdFusion&#160;MX Administrator, see <i>Configuring and Administering ColdFusion&#160;MX</i>.</p>


<hr />
<p align="right"><p align="right"><a href="00001593.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001595.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001594.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



