<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Flow control</title>
</head>
<body>
<p align="right"><p align="right"><a href="00000875.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000877.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Flow control</h1>
<p>ColdFusion provides several tags that let you control how a page gets executed. These tags generally correspond to programming language flow control statements, such as if, then, and else. The following tags provide ColdFusion flow control:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Tags
    </th>
    <th>
Purpose
    </th>
  </tr>
  <tr>
    <td>
<p><code>cfif</code>, <code>cfelseif</code>, <code>cfelse</code></p>
    </td>
    <td>
<p>Select sections of code based on whether expressions are True or False.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p><code>cfswitch</code>, <code>cfcase</code>, <code>cfdefaultcase</code></p>
    </td>
    <td>
<p>Select among sections of code based on the value of an expression. Case processing is not limited to True and False conditions.</p>
    </td>
  </tr>
  <tr>
    <td>
<p><code>cfloop</code>, <code>cfbreak</code></p>
    </td>
    <td>
<p>Loop through code based on any of the following values: entries in a list, keys in a structure or external object, entries in a query column, an index, or the value of a conditional expression.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p><code>cfabort</code>, <code>cfexit</code></p>
    </td>
    <td>
<p>End processing of a ColdFusion page or custom tag.</p>
    </td>
  </tr>
</table>

<p>This section provides a basic introduction to using flow-control tags. CFScript also provides a set of flow-control statements. For information on using flow-control statements in CFScript, see <a href="00000968.htm#1119878">Extending ColdFusion Pages with CFML Scripting</a>. For more details on using flow-control tags, see the reference pages for these tags in <i>CFML Reference</i>.</p>
<p>This section describes the following topics:</p>
<ul>
<li>
   <a href="00000876.htm#2732437">cfif, cfelseif, and cfelse</a>
</li>
<li>
   <a href="00000876.htm#2732439">cfswitch, cfcase, and cfdefaultcase</a>
</li>
<li>
   <a href="00000876.htm#2733882">cfloop and cfbreak</a>
</li>
<li>
   <a href="00000876.htm#2734022">cfabort and cfexit</a>
</li>
</ul>
<h2><a name="wp2732437"></a>cfif, cfelseif, and cfelse</h2>
<p>The <a href="00000274.htm#1100123"><code>cfif</code></a>, <a href="00000241.htm#2647667"><code>cfelseif</code></a>, and <a href="00000240.htm#3138301"><code>cfelse</code></a> tags provide if-then-else conditional processing, as follows: </p>
<ol>
<li>
   The <code>cfif</code> tag tests a condition and executes its body if the condition is True. 
</li>
<li>
   If the preceding <code>cfif</code> (or <code>cfelseif</code>) test condition is False, the <code>cfelseif</code> tag tests another condition and executes its body if that condition is True.
</li>
<li>
   The <code>cfelse</code> tag can optionally follow a <code>cfif</code> tag and zero or more <code>cfelseif</code> tags. Its body executes if all the preceding tags' test conditions are False.
</li>
</ol>
<p>The following example shows the use of the <code>cfif</code>, <code>cfelseif</code>, and <code>cfelse</code> tags. If the value of the type variable is &quot;Date,&quot; the date displays; if the value is &quot;Time,&quot; the time displays; otherwise, both the time and date display.</p>
<pre>&lt;cfif type IS &quot;Date&quot;&gt;
   &lt;cfoutput&gt;#DateFormat(Now())#&lt;/cfoutput&gt;
&lt;cfelseif type IS &quot;Time&quot;&gt;
   &lt;cfoutput&gt;#TimeFormat(Now())#&lt;/cfoutput&gt;
&lt;cfelse&gt;
   &lt;cfoutput&gt;#TimeFormat(Now())#, #DateFormat(Now())#&lt;/cfoutput&gt;
&lt;/cfif&gt;
</pre><h2><a name="wp2732439"></a>cfswitch, cfcase, and cfdefaultcase</h2>
<p>The <a href="00000339.htm#1103819"><code>cfswitch</code></a>, <a href="00000224.htm#3798974"><code>cfcase</code></a>, and <a href="00000234.htm#2664493"><code>cfdefaultcase</code></a> tags let you select among different code blocks based on the value of an expression. ColdFusion processes these tags as follows: </p>
<ol>
<li>
   The <code>cfswitch</code> tag evaluates an expression. The <code>cfswitch</code> tag body contains one or more <code>cfcase</code> tags and optionally includes <code>cfdefaultcase</code> tag.
</li>
<li>
   Each <code>cfcase</code> tag in the <code>cfswitch</code> tag body specifies a value or set of values. If a value matches the value determined by the expression in the <code>cfswitch</code> tag, ColdFusion runs the code in the body of the <code>cfcase</code> tag and then exits the <code>cfswitch</code> tag. If two <code>cfcase</code> tags have the same condition, ColdFusion generates an error.
</li>
<li>
   If none of the <code>cfcase</code> tags match the value determined by the <code>cfswitch</code> tag, and the <code>cfswitch</code> tag body includes a <code>cfdefaultcase</code> tag, ColdFusion runs the code in the <code>cfdefaultcase</code> tag body.
</li>
</ol>
<p><strong>Note: </strong>Although the <code>cfdefaultcase</code> tag does not have to follow all <code>cfcase</code> tags, it is good programming practice to put it at the end of the <code>cfswitch</code> statement.</p><p>The <code>cfswitch</code> tag provides better performance than a <code>cfif</code> tag with multiple <code>cfelseif</code> tags, and is easier to read. Switch processing is commonly used when different actions are required based on a a string variable such as a month or request identifier.</p>
<p>The following example shows switch processing:</p>
<pre>&lt;cfoutput query = &quot;GetEmployees&quot;&gt;
&lt;cfswitch expression = #Department#&gt;
   &lt;cfcase value = &quot;Sales&quot;&gt;
      #FirstName# #LastName# is in &lt;b&gt;Sales&lt;/b&gt;&lt;br&gt;&lt;br&gt;
   &lt;/cfcase&gt;
   &lt;cfcase value = &quot;Accounting&quot;&gt;
      #FirstName# #LastName# is in &lt;b&gt;Accounting&lt;/b&gt;&lt;br&gt;&lt;br&gt;
   &lt;/cfcase&gt;
   &lt;cfcase value = &quot;Administration&quot;&gt;
      #FirstName# #LastName# is in &lt;b&gt;Administration&lt;/b&gt;&lt;br&gt;&lt;br&gt;
   &lt;/cfcase&gt;
   &lt;cfdefaultcase&gt;#FirstName# #LastName# is not in Sales,
      Accounting, or Administration.&lt;br&gt;
   &lt;/cfdefaultcase&gt;
&lt;/cfswitch&gt;
&lt;/cfoutput&gt;
</pre><h2><a name="wp2733882"></a>cfloop and cfbreak</h2>
<p>The <a href="00000290.htm#3301338"><code>cfloop</code></a> tag loops through the tag body zero or more times based on a condition specified by the tag attributes. The <a href="00000221.htm#1097484"><code>cfbreak</code></a> tag exits a <code>cfloop</code> tag.</p>
<h3><a name="wp2736492"></a>cfloop</h3>
<p>The <a href="00000290.htm#3301338"><code>cfloop</code></a> tag provides five types of loops:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Loop type
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>Index</p>
    </td>
    <td>
<p>Loops through the body of the tag and increments a counter variable by a specified amount after each loop until the counter reaches a specified value.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>Conditional </p>
    </td>
    <td>
<p>Checks a condition and runs the body of the tag if the condition is True.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>Query</p>
    </td>
    <td>
<p>Loops through the body of the tag once for each row in a query.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>List</p>
    </td>
    <td>
<p>Loops through the body of the tag once for each entry in a list.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>Collection</p>
    </td>
    <td>
<p>Loops through the body of the tag once for each key in a ColdFusion structure or item in a COM/DCOM object.</p>
    </td>
  </tr>
</table>

<p>The following example shows a simple index loop:</p>
<pre>&lt;cfloop index = &quot;LoopCount&quot; from = 1 to = 5&gt;
The loop index is &lt;cfoutput&gt;#LoopCount#&lt;/cfoutput&gt;.&lt;br&gt;
&lt;/cfloop&gt;
</pre><p>The following example shows a simple conditional loop. The code does the following:</p>
<ol>
<li>
   Sets up a ten-element array with the word &quot;kumquats&quot; in the fourth entry. 
</li>
<li>
   Loops through the array until it encounters an array element containing &quot;kumquats&quot; or it reaches the end of the array. 
</li>
<li>
   Prints out the value of the Boolean variable that indicates whether it found the word <i>kumquats</i> and the array index at which it exited the loop. 
</li>
</ol>
<pre>&lt;cfset myArray = ArrayNew(1)&gt;
&lt;!--- Use ArraySet to initialize the first ten elements to 123 ---&gt;
&lt;cfset ArraySet(myArray, 1, 10, 123)&gt;
&lt;cfset myArray[4] = &quot;kumquats&quot;&gt;

&lt;cfset foundit = False&gt;
&lt;cfset i = 0&gt;
&lt;cfloop condition = &quot;(NOT foundit) AND (i LT ArrayLen(myArray))&quot;&gt;
   &lt;cfset i = i + 1&gt;
   &lt;cfif myArray[i] IS &quot;kumquats&quot;&gt;
      &lt;cfset foundit = True&gt;
   &lt;/cfif&gt;
&lt;/cfloop&gt;
&lt;cfoutput&gt;
i is #i#&lt;br&gt;
foundit is #foundit#&lt;br&gt;
&lt;/cfoutput&gt;
</pre><p><strong>Note: </strong>You can get an infinite conditional loop if you do not force an end condition. In this example, the loop is infinite if you omit the <code>&lt;cfset i = i + 1&gt;</code> statement. To end an infinite loop, stop the ColdFusion application server.</p><h3><a name="wp2734363"></a>cfbreak</h3>
<p>The <a href="00000221.htm#1097484"><code>cfbreak</code></a> tag exits the <code>cfloop</code> tag. You typically use it in a <code>cfif</code> tag to exit the loop if a particular condition occurs. The following example shows the use of a <code>cfbreak</code> tag in a query loop:</p>
<pre>&lt;cfloop query=&quot;fruitOrder&quot;&gt;
   &lt;cfif fruit IS &quot;kumquat&quot;&gt;
      &lt;cfoutput&gt;You cannot order kumquats!&lt;br&gt;&lt;/cfoutput&gt;
      &lt;cfbreak&gt;
   &lt;/cfif&gt;
   &lt;cfoutput&gt;You have ordered #quantity# #fruit#.&lt;br&gt;&lt;/cfoutput&gt;
&lt;/cfloop&gt;
</pre><h2><a name="wp2734022"></a>cfabort and cfexit</h2>
<p>The <a href="00000215.htm#3835579"><code>cfabort</code></a> tag stops processing of the current page at the location of the <code>cfabort</code> tag. ColdFusion returns to the user or calling tag everything that was processed before the <code>cfabort</code> tag. You can optionally specify an error message to display. You can use the <code>cfabort</code> tag as the body of a <code>cfif</code> tag to stop processing a page when a condition, typically an error, occurs.</p>
<p>The <a href="00000244.htm#1098252"><code>cfexit</code></a> tag controls the processing of a custom tag, and can only be used in ColdFusion custom tags. For more information see, <a href="00001082.htm#1125452">Terminating tag execution</a> and <i>CFML Reference</i>.</p>


<hr />
<p align="right"><p align="right"><a href="00000875.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000877.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00000876.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



