<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>SendGatewayMessage</title>
</head>
<body>
<p align="right"><p align="right"><a href="00000621.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000623.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>SendGatewayMessage</h1>
<h4><a name="wp153567"></a>Description</h4>
<p>Sends an outgoing message through a ColdFusion MX event gateway.</p>
<h4><a name="wp153569"></a>Returns</h4>
<p>String. The value returned depends on the gateway type.</p>
<h4><a name="wp153571"></a>Category</h4>
<p><a href="00000361.htm#3490127">Extensibility functions</a></p>
<h4><a name="wp153573"></a>Function syntax</h4>
<pre><code><strong>SendGatewayMessage</strong></code>(<i>gatewayID</i>, <i>data</i>)
</pre><h4><a name="wp153575"></a>See also</h4>
<p><a href="00000481.htm#4999113"><code>GetGatewayHelper</code></a>; <a href="00000752.htm#1169465">IM gateway message sending commands</a>, <a href="00000777.htm#1199995">SMS Gateway CFEvent structure and commands</a>, <a href="00000783.htm#1200802">CFML event gateway SendGatewayMessage data parameter</a>, and <a href="00001643.htm#136724">Sending a message using the SendGatewayMessage function</a> in <a href="00001625.htm#109411">Using Event Gateways</a> in <i>ColdFusion MX Developer's Guide</i></p>
<h4><a name="wp153580"></a>History</h4>
<p>ColdFusion&#160;MX&#160;7: Added this function.</p>
<h4><a name="wp153585"></a>Parameters</h4>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Parameter
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>gatewayID</p>
    </td>
    <td>
<p>Identifier of the gateway to send the message. Must be the Gateway ID of one of the ColdFusion event gateway instances configured on the ColdFusion MX Administrator Event Gateways section's Gateways page.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>data</p>
    </td>
    <td>
<p>A ColdFusion structure. The contents of the structure depend on the event gateway type, but typically include a MESSAGE field that contains the message to send and a field that contains the destination address.</p>
    </td>
  </tr>
</table>

<h4><a name="wp159074"></a>Usage</h4>
<p>The <code>SendGatewayMessage</code> function calls the specified gateway's <code>outgoingMessage</code> method. The value returned by the function depends on the gateway type. The following table describes the return values for standard ColdFusion MX gateway types: </p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Gateway type
    </th>
    <th>
Return values
    </th>
  </tr>
  <tr>
    <td>
<p>Asynchronous CFML</p>
    </td>
    <td>
<p>If the message was queued for delivery to the CFC, returns True; False, otherwise.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>Lotus SameTime</p>
    </td>
    <td>
<p>If the message or command was successful, returns OK.</p>
<p>If an error occurred, returns a string indicating the cause. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>SMS</p>
    </td>
    <td>
<p>If the gateway is in asynchronous mode, returns the empty string immediately.</p>
<p>If the gateway is in synchronous mode, the function waits for the gateway to return a response. If the message was succesfully sent to the short message service center (SMSC), returns the message ID from the SMSC. If an error occured, returns a string indicating the cause. </p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>XMPP</p>
    </td>
    <td>
<p>If the message or command was successful, returns OK</p>
<p>If an error occured, returns a string indicating the cause. </p>
    </td>
  </tr>
</table>

<h4><a name="wp159070"></a>Example</h4>
<p>The following example uses an instance of the CFML gateway to log messages asynchronously to a file. To use this example, you must configure an instance of the CFML gateway with the name &quot;Asynch Logger&quot; in the ColdFusion MX Administrator. This gateway instance must use a CFC that takes the message and logs it. For sample CFC code, see <a href="00001647.htm#137326">Using the CFML event gateway for asynchronous CFCs</a> in <a href="00001625.htm#109411">Using Event Gateways</a> in <i>ColdFusion MX Developer's Guide</i>.</p>
<pre>Sending an event to the CFML event gateway that is registered in the 
   ColdFusion MX Administrator as Asynch Logger.&lt;br&gt;
&lt;cfscript&gt;
   status = false;
   props = structNew();
   props.message = &quot;Replace me with a variable with data to log&quot;;   
   status = SendGatewayMessage(&quot;Asynch Logger&quot;, props);
   if (status IS True) WriteOutput('Event Message &quot;#props.message#&quot; has been sent.');
&lt;/cfscript&gt;
</pre>

<hr />
<p align="right"><p align="right"><a href="00000621.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000623.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00000622.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



