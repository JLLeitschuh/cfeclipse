<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>DateDiff</title>
</head>
<body>
<p align="right"><p align="right"><a href="00000439.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000441.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>DateDiff</h1>
<h4><a name="wp1224587"></a>Description</h4>
<p>Determines the integer number of units by which <i>date1</i> is less than <i>date2</i>.</p>
<h4><a name="wp3386531"></a>Returns</h4>
<p>A number of units, of type <i>datepart</i>.</p>
<h4><a name="wp2501450"></a>Category</h4>
<p><a href="00000357.htm#1098968">Date and time functions</a></p>
<h4><a name="wp2587484"></a>Function syntax</h4>
<pre><code><strong>DateDiff</strong></code>(&quot;<i>datepart&quot;</i>, &quot;<i>date1&quot;</i>, &quot;<i>date2&quot;</i>)
</pre><h4><a name="wp2587528"></a>See also</h4>
<p><a href="00000437.htm#1102869"><code>DateAdd</code></a>, <a href="00000442.htm#1103355"><code>DatePart</code></a>, <a href="00000435.htm#1102715"><code>CreateTimeSpan</code></a></p>
<h4><a name="wp3708999"></a>History</h4>
<p>ColdFusion&#160;MX: </p>
<ul>
<li>
   Changed how negative date differences are calculated: this function calculates negative date differences correctly; its output may be different from that in earlier releases. 
</li>
<li>
   Changed the <code>w</code> and <code>ww</code> masks; they determine the number of full weeks between the two dates.
</li>
</ul>
<h4><a name="wp1281341"></a>Parameters</h4>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Parameter
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>datepart</p>
    </td>
    <td>
<p>String specifying the units in which to count; for example yyyy requests a date difference in whole years.</p>
<ul>
<li>
   yyyy: Years
</li>
<li>
   q: Quarters
</li>
<li>
   m: Months
</li>
<li>
   y: Days of year (same as d)
</li>
<li>
   d: Days
</li>
<li>
   w: Weekdays (same as ww)
</li>
<li>
   ww: Weeks
</li>
<li>
   h: Hours
</li>
<li>
   n: Minutes
</li>
<li>
   s: Seconds
</li>
</ul>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>date1</p>
    </td>
    <td>
<p>Date/time object, in the range 100 AD-9999 AD.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>date2</p>
    </td>
    <td>
<p>Date/time object, in the range 100 AD-9999 AD. </p>
    </td>
  </tr>
</table>

<h4><a name="wp1103217"></a>Usage</h4>
<p>The <code>DateDiff</code> function determines the number of complete <i>datepart</i> units between the two dates; for example, if the <i>datepart</i> parameter is &quot;m&quot; and the dates differ by 55 days, the function returns 1.</p>
<p>Enclose string constant dates in quotation marks. If the text contains only numbers (such 1932), and is not surrounded by quotation marks, ColdFusion interprets it as a date/time object, resulting in an incorrect value.</p>
<h4><a name="wp1103223"></a>Example</h4>
<pre>&lt;cfif IsDefined(&quot;form.value&quot;)&gt;
   &lt;cfset value = form.value&gt;
&lt;/cfif&gt;
&lt;cfif IsDefined(&quot;form.type&quot;)&gt;
   &lt;cfset type = form.type&gt;
&lt;/cfif&gt;

&lt;cfif IsDefined(&quot;form.date1&quot;) and IsDefined(&quot;form.date2&quot;)&gt;

   &lt;cfif IsDate(form.date1) and IsDate(form.date2)&gt;
   
      &lt;p&gt;This example uses DateDiff to determine the difference
      in    
      &lt;cfswitch expression = &quot;#form.type#&quot;&gt;
         &lt;cfcase value=&quot;yyyy&quot;&gt;years&lt;/cfcase&gt;
         &lt;cfcase value=&quot;q&quot;&gt;quarters&lt;/cfcase&gt;
         &lt;cfcase value=&quot;m&quot;&gt;months&lt;/cfcase&gt;
         &lt;cfcase value=&quot;y&quot;&gt;days&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;d&quot;&gt;days&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;w&quot;&gt;weekdays&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;ww&quot;&gt;weeks&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;h&quot;&gt;hours&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;n&quot;&gt;minutes&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;s&quot;&gt;seconds&lt;/cfcase&gt;      
         &lt;cfdefaultcase&gt;years&lt;/cfdefaultcase&gt;
      &lt;/cfswitch&gt;
          dateparts between date1 and date2.
      
      &lt;cfif DateCompare(&quot;#form.date1#&quot;,&quot;#form.date2#&quot;) is not 0&gt;
      &lt;p&gt;The difference is &lt;cfoutput&gt;#Abs(DateDiff(type, form.date2, form.date1))#&lt;/cfoutput&gt;
      &lt;cfswitch expression = &quot;#form.type#&quot;&gt;
         &lt;cfcase value=&quot;yyyy&quot;&gt;years&lt;/cfcase&gt;
         &lt;cfcase value=&quot;q&quot;&gt;quarters&lt;/cfcase&gt;
         &lt;cfcase value=&quot;m&quot;&gt;months&lt;/cfcase&gt;
         &lt;cfcase value=&quot;y&quot;&gt;days&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;d&quot;&gt;days&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;w&quot;&gt;weekdays&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;ww&quot;&gt;weeks&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;h&quot;&gt;hours&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;n&quot;&gt;minutes&lt;/cfcase&gt;   
         &lt;cfcase value=&quot;s&quot;&gt;seconds&lt;/cfcase&gt;      
         &lt;cfdefaultcase&gt;years&lt;/cfdefaultcase&gt;
      &lt;/cfswitch&gt;.
      &lt;cfelse&gt;
      &lt;p&gt;The two dates are equal!  Try changing one of the values ...
      &lt;/cfif&gt;
   
   &lt;cfelse&gt;
   &lt;p&gt;Please enter two valid date/time values, formatted like this:
   &lt;cfoutput&gt;#DateFormat(Now())#&lt;/cfoutput&gt;   
   &lt;/cfif&gt;   

&lt;/cfif&gt;
&lt;form action=&quot;index.cfm&quot; method=&quot;post&quot;&gt;

&lt;pre&gt;
Date 1
&lt;input type=&quot;Text&quot; name=&quot;date1&quot; value=&quot;&lt;CFOUTPUT&gt;#DateFormat(Now())#&lt;/CFOUTPUT&gt;&quot;&gt;
Date 2
&lt;input type=&quot;Text&quot; name=&quot;date2&quot; value=&quot;&lt;CFOUTPUT&gt;#DateFormat(Now())#&lt;/CFOUTPUT&gt;&quot;&gt;
What kind of unit to show difference?
   &lt;select name=&quot;type&quot;&gt;
      &lt;option value=&quot;yyyy&quot; selected&gt;years
      &lt;option value=&quot;q&quot;&gt;quarters
      &lt;option value=&quot;m&quot;&gt;months
      &lt;option value=&quot;y&quot;&gt;days of year
      &lt;option value=&quot;d&quot;&gt;days
      &lt;option value=&quot;w&quot;&gt;weekdays
      &lt;option value=&quot;ww&quot;&gt;weeks
      &lt;option value=&quot;h&quot;&gt;hours
      &lt;option value=&quot;n&quot;&gt;minutes
      &lt;option value=&quot;s&quot;&gt;seconds
   &lt;/select&gt;
&lt;/pre&gt;

&lt;input type=&quot;Submit&quot; name=&quot;&quot;&gt;&lt;input type=&quot;RESET&quot;&gt;
&lt;/form&gt;

.
</pre>

<hr />
<p align="right"><p align="right"><a href="00000439.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000441.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00000440.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



