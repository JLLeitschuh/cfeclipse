<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Retrieving information about the categories contained in a collection</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001314.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001316.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Retrieving information about the categories contained in a collection</h1>
<p>You can retrieve the category information for a collection by using the <code>cfcollection</code> tag's <code>categoryList </code>action.<code> </code>The <code>categoryList </code>action returns a structure that contains two keys:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Variable
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>categories</p>
    </td>
    <td>
<p>The name of the category and its hit count, where hit count is the number of documents in the specified category.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>categorytrees</p>
    </td>
    <td>
<p>The document tree (a/b/c) and hit count, where hit count is the number of documents at or below the branch of the document tree.</p>
    </td>
  </tr>
</table>

<p>You can use the information returned by <code>categoryList</code> to display to users the number of documents available for searching, as well the document tree available for searching. You can also create a search interface that lets the user select what category to search within based on the results returned by <code>categoryList</code>.</p>
<pre>&lt;cfcollection 
   action=<code><strong>&quot;categoryList&quot;</strong></code> 
   collection=&quot;collectionName&quot; 
<code><strong>   &quot;name=&quot;info&quot;</strong></code>&gt; 

&lt;cfoutput&gt; 
   &lt;cfset catStruct=<code><strong>info.categories</strong></code>&gt; 
   &lt;cfset catList=StructKeyList(catStruct)&gt; 
   &lt;cfloop list=&quot;catList&quot; index=&quot;cat&quot;&gt; Category: #cat# &lt;br&gt; 
      Documents: #catStruct[cat]#&lt;br&gt; 
   &lt;/cfloop&gt;
&lt;/cfoutput&gt; 
</pre><p>To retrieve information about the categories contained in a collection, you use the <code>cfcollection</code> tag, and create an application page that retrieves category information from the collection and displays the number of documents contained by each category. This example lets the user enter and submit the name of the collection via a form, and then uses the <code>categoryList</code> action to retrieve information about the number of documents contained by the collection, and the hierarchical tree structure into which the category is organized.</p>
<pre>&lt;html&gt; 
&lt;head&gt;
   &lt;title&gt;Category information&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;cfoutput&gt;
&lt;form action=&quot;#CGI.SCRIPT_NAME#&quot; method=&quot;POST&quot;&gt;
   Enter Collection Name: &lt;input Type=&quot;text&quot; Name=&quot;collection&quot; 
      value=&quot;#collection#&quot;&gt;&lt;br&gt;
 &lt;input Type=&quot;submit&quot; Value=&quot;GetInfo&quot;&gt;
&lt;/form&gt;
&lt;/cfoutput&gt;
&lt;cfif isdefined(&quot;Form.collection&quot;)&gt;
   &lt;cfoutput&gt;
   Getting collection info...
   &lt;br&gt;
   &lt;cfflush&gt;
<code><strong>   &lt;cfcollection </strong></code>
<code><strong>      action=&quot;categorylist&quot; </strong></code>
<code><strong>      collection=&quot;#collection#&quot; </strong></code>
<code><strong>      name=&quot;out&quot;&gt;</strong></code>
   &lt;br&gt;
<code><strong>   &lt;cfset categories=out.categories&gt;</strong></code>
<code><strong>   &lt;cfset tree=out.categorytrees&gt;</strong></code>
<code><strong>   &lt;cfset klist=StructKeyList(categories)&gt;</strong></code>
   &lt;table border=1&gt;
   &lt;th&gt;Category&lt;/th&gt; &lt;th&gt;Documents&lt;/th&gt;
   &lt;cfloop index=&quot;x&quot; list=&quot;#klist#&quot;&gt;
   &lt;tr&gt;
    &lt;td&gt;#x#&lt;/td&gt; &lt;td align=&quot;center&quot;&gt;#categories[x]#&lt;/td&gt;
   &lt;/tr&gt;
   &lt;/cfloop&gt;
   &lt;/table&gt;
   &lt;cfset klist=StructKeyList(tree)&gt;
   &lt;table border=1&gt;
   &lt;th&gt;Category&lt;/th&gt; &lt;th&gt;Documents&lt;/th&gt;
   &lt;cfloop index=&quot;x&quot; list=&quot;#klist#&quot;&gt;
   &lt;tr&gt;
    &lt;td&gt;#x#&lt;/td&gt; &lt;td align=&quot;center&quot;&gt;#tree[x]#&lt;/td&gt;
   &lt;/tr&gt;
   &lt;/cfloop&gt;
   &lt;/table&gt;
   &lt;/cfoutput&gt;
&lt;/cfif&gt;
&lt;/body&gt;
</pre><p>For more information on using the <code>cfcollection</code> tag to create Verity collections with support for categories, see <a href="00000230.htm#1097667"><code>cfcollection</code></a> in <a href="00000195.htm#2501150">ColdFusion Tags</a> in <i>CFML Reference</i>.</p>


<hr />
<p align="right"><p align="right"><a href="00001314.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001316.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001315.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



