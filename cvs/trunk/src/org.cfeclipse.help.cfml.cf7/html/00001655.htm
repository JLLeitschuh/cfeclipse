<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Handling incoming messages</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001654.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001656.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Handling incoming messages</h1>
<p>The IM event gateway handles five types of messages, and your CFC must implement a listener method for each message type. The following table describes the message-handling CFC methods and the messages they handle. It lists the default CFC method names; however, you can change the names in the gateway configuration file.</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
CFC method
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p><a href="00000751.htm#1184666"><code>onIncomingMessage</code></a></p>
    </td>
    <td>
<p>Standard message from an IM user. The application processes the message body appropriately; for example, it could display the message in an interface window. </p>
<p>This method can return a response message to the sender.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p><a href="00000747.htm#1169057"><code>onAddBuddyRequest</code></a></p>
    </td>
    <td>
<p>Request from another IM user to add your application's IM ID to their buddy list. The CFC must determine whether to accept or reject the request, or to take no action. No action might be appropriate in cases where the request must be reviewed offline for approval and responses are sent at a later time.</p>
<p>The CFC returns a message with the decision as a command value and optionally a text message specifying the reason. If you accept the request, the requestor automatically gets added to the list of IDs that can get status information for the gateway. If you specify no action, ColdFusion does not respond.</p>
    </td>
  </tr>
  <tr>
    <td>
<p><a href="00000748.htm#1169190"><code>onAddBuddyResponse</code></a></p>
    </td>
    <td>
<p>Response from another IM user to a request from the gateway to be added to their buddy list. The response message is accept or decline. </p>
<p>Your application can handle this response as appropriate; for example, to add or remove the ID from a list of message recipients. </p>
<p>This method does not return a value.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p><a href="00000749.htm#1169283"><code>onBuddyStatus</code></a></p>
    </td>
    <td>
<p>Message indicating a gateway buddy's status. Received when a buddy's status changes; for example, from OFFLINE to ONLINE. </p>
<p>This method does not return a value.</p>
    </td>
  </tr>
  <tr>
    <td>
<p><a href="00000750.htm#1169392"><code>onIMServerMessage</code></a></p>
    </td>
    <td>
<p>Status messages from the IM server, such as warning or error messages. The messages you might receive depend on the IM server that sends them. For information on the server messages, see the documentation for the IM server that your gateway instance uses. </p>
<p>This method does not return a value.</p>
    </td>
  </tr>
</table>

<p>For detailed information on each method, including examples of their use, see <a href="00000746.htm#1171422">IM Gateway CFC incoming message methods</a> in <i>CFML Reference</i>. For an example that uses these functions, see <a href="00001657.htm#148660">Sample IM message handling application</a>.</p>


<hr />
<p align="right"><p align="right"><a href="00001654.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001656.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001655.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



