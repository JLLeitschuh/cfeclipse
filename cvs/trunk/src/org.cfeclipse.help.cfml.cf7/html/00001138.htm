<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Specifying custom error messages with the cferror tag</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001137.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001139.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Specifying custom error messages with the cferror tag</h1>
<p>Custom error pages let you control the error information that users see. You can specify custom error pages for different types of errors and handle different types of errors in different ways. For example, you can create specific pages to handle errors that could be recoverable, such as request time-outs. You can also make your error messages consistent with the look and feel of your application. </p>
<p>You can specify the following types of custom error message pages:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Type
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>Validation</p>
    </td>
    <td>
<p>Handles server-side form field data validation errors. The validation error page cannot include CFML tags, but it can display error page variables.</p>
<p>You can use this attribute only in the Application.cfc initialization code or on the Application.cfm page. It has no effect when used on any other page. Therefore, you can specify only one validation error page per application, and that page applies to all server-side validation errors.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>Exception</p>
    </td>
    <td>
<p>Handles specific exception errors. You can specify individual error pages for different types of exceptions. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>Request</p>
    </td>
    <td>
<p>Handles any exception that is not otherwise-handled. The request error page runs after the CFML language processor finishes. As a result, the request error page cannot include CFML tags, but can display error page variables. A request error page is useful as a backup if errors occur in other error handlers. </p>
    </td>
  </tr>
</table>

<h2><a name="wp1106836"></a>Specifying a custom error page</h2>
<p>You specify the custom error pages with the <a href="00000242.htm#2022557"><code>cferror</code></a> tag. For Validation errors, the tag must be in the Application.cfc initialization code or on the Application.cfm page. For Exception and Request errors, you can set the custom error pages on each application page. However, because custom error pages generally apply to an entire application, it is more efficient to put these <code>cferror</code> tags in the Application.cfc or Application.cfm file also. For more information on using these pages, see <a href="00001102.htm#1101532">Designing and Optimizing a ColdFusion&#160;Application</a>.</p>
<p>The <code>cferror</code> tag has the attributes listed in the following table:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Attribute
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>Type</p>
    </td>
    <td>
<p>The type of error that will cause ColdFusion to display this page: Exception, Request, or Validation.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>Exception</p>
    </td>
    <td>
<p>Use only for the Exception type. The specific exception or exception category that will cause the page to be displayed. This attribute can specify any of the types described in <a href="00001134.htm#1133743">About ColdFusion exceptions</a>.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>Template</p>
    </td>
    <td>
<p>The ColdFusion page to display.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>MailTo</p>
    </td>
    <td>
<p>(Optional) An e-mail address. The <code>cferror</code> tag sets the error page <code>error.mailTo</code> variable to this value. The error page can use the <code>error.mailTo</code> value in a message that tells the user to send an error notification. ColdFusion does <i>not</i> send any message itself.</p>
    </td>
  </tr>
</table>

<p>The following <code>cferror</code> tag specifies a custom error page for exceptions that occur in locking code and informs the error page of the of an e-mail address it can use to send a notification each time this type of error occurs:</p>
<pre>&lt;cferror type = &quot;exception&quot; <br />exception = &quot;lock&quot; <br />template = &quot;../common/lockexcept.cfm&quot;<br />mailto = &quot;server@mycompany.com&quot;&gt;
</pre><p>For detailed information on the <a href="00000242.htm#2022557"><code>cferror</code></a> tag, see <i>CFML Reference</i>.</p>
<h2><a name="wp1137942"></a>Creating an error application page</h2>
<p>The following table lists the rules and considerations that apply to error application pages:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Type
    </th>
    <th>
Considerations
    </th>
  </tr>
  <tr>
    <td>
<p>Validation</p>
    </td>
    <td>
<ul>
<li>
   Cannot use CFML tags. 
</li>
<li>
   Can use HTML tags. 
</li>
<li>
   Can use the <code>Error.InvalidFields</code>, <code>Error.validationHeader</code>, and <code>Error.validationFooter</code> variables by enclosing them with number signs (#). 
</li>
<li>
   Cannot use any other CFML variables.
</li>
</ul>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>Request </p>
    </td>
    <td>
<ul>
<li>
   Cannot use CFML tags.
</li>
<li>
   Can use HTML tags. 
</li>
<li>
   Can use nine CFML error variables, such as <code>Error.Diagnostics</code>, by enclosing them with number signs.
</li>
<li>
   Cannot use other CFML variables.
</li>
</ul>
    </td>
  </tr>
  <tr>
    <td>
<p>Exception</p>
    </td>
    <td>
<ul>
<li>
   Can use full CFML syntax, including tags, functions, and variables. 
</li>
<li>
   Can use nine standard CFML Error variables and cfcatch variables. Use either <code>Error</code> or <code>cferror</code> as the prefix for both types of variables.
</li>
<li>
   Can use other application-defined CFML variables.
</li>
<li>
   To display any CFML variable, use the <a href="00000309.htm#1101659"><code>cfoutput</code></a> tag.
</li>
</ul>
    </td>
  </tr>
</table>

<p>The following table describes the variables available on error pages:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Error page type
    </th>
    <th>
Error variable
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td colspan="1" rowspan="3">
<p>Validation</p>
    </td>
    <td>
<p>error.invalidFields</p>
    </td>
    <td>
<p>Unordered list of validation errors that occurred. This includes any text that you specify in the value attribute or a hidden tag used to validate form input.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>error.validationHeader</p>
    </td>
    <td>
<p>Text for the header of the default validation message.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>error.validationFooter</p>
    </td>
    <td>
<p>Text for the footer of the default validation message.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td colspan="1" rowspan="9">
<p>Exception and </p>
<p>request</p>
    </td>
    <td>
<p>error.browser</p>
    </td>
    <td>
<p>Browser that was running when the error occurred.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>error.dateTime</p>
    </td>
    <td>
<p>Date and time when the error occurred.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>error.diagnostics</p>
    </td>
    <td>
<p>Detailed error diagnostics.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>error.generatedContent</p>
    </td>
    <td>
<p>Any content that ColdFusion generated in response to the request prior to the error.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>error.HTTPReferer</p>
    </td>
    <td>
<p>Page containing the HTML link to the page on which the error occurred. This value is an empty string if the user specified the page directly in the browser.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>error.mailTo</p>
    </td>
    <td>
<p>E-mail address of the administrator who should be notified. This value is set in the <code>mailTo</code> attribute of the <a href="00000242.htm#2022557"><code>cferror</code></a> tag.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>error.queryString</p>
    </td>
    <td>
<p>URL query string of the client&#39;s request, if any. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>error.remoteAddress</p>
    </td>
    <td>
<p>IP address of the remote client.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>error.template</p>
    </td>
    <td>
<p>Page being executed when the error occurred. </p>
    </td>
  </tr>
  <tr>
    <td colspan="1" rowspan="4">
<p>Exception only</p>
    </td>
    <td>
<p>error.message</p>
    </td>
    <td>
<p>Error message associated with the exception.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>error.rootCause</p>
    </td>
    <td>
<p>Java servlet exception reported by the JVM as the cause of the &quot;root cause&quot; of the exception. This variable is a Java object.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>error.tagContext</p>
    </td>
    <td>
<p>Array of structures containing information for each tag in the tag stack The tag stack consists of each tag that is currently open. For more information, see <a href="00001142.htm#1131396">Exception information in cfcatch blocks</a></p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>error.type</p>
    </td>
    <td>
<p>Exception type. For more information, see <a href="00001134.htm#1133743">About ColdFusion exceptions</a>. </p>
    </td>
  </tr>
</table>

<p>Exception error pages can also use all of the exception variables listed in the section <a href="00001142.htm#1131396">Exception information in cfcatch blocks</a>. To use these variables, replace the <code>cfcatch</code> prefix with <code>cferror</code> or <code>error</code>. For example, to use the exception message in an error page, refer to it as <code>error.message</code>.</p>
<p>In general, production Exception and Request pages should not display detailed error information, such as that supplied by the <code>error.diagnostics</code> variable. Typically, Exception pages e-mail detailed error information to an administrative address or log the information using the <code>cflog</code> tag instead of displaying it to the user. For more information on using the <code>cflog</code> tag, see <a href="00001139.htm#1103550">Logging errors with the cflog tag</a>.</p>
<h4><a name="wp1096230"></a>Example of a request error page</h4>
<p>The following example shows a custom error page for a request error:</p>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Products - Error&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h2&gt;Sorry&lt;/h2&gt;

&lt;p&gt;An error occurred when you requested this page.&lt;/p&gt;
&lt;p&gt;Please send e-mail with the following information to #error.mailTo# to report<br />this error.&lt;/p&gt;

&lt;table border=1&gt;
&lt;tr&gt;&lt;td&gt;&lt;b&gt;Error Information&lt;/b&gt; &lt;br&gt;
   Date and time: #error.DateTime# &lt;br&gt;
   Page: #error.template# &lt;br&gt;
   Remote Address: #error.remoteAddress# &lt;br&gt;
   HTTP Referer: #error.HTTPReferer#&lt;br&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;We apologize for the inconvenience and will work to correct the problem.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><h4><a name="wp1096234"></a>Example of a validation error page</h4>
<p>The following example shows a simple custom error page for a validation error:</p>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Products - Error&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h2&gt;Data Entry Error&lt;/h2&gt;

&lt;p&gt;You failed to correctly complete all the fields
in the form. The following problems occurred:&lt;/p&gt;

#error.invalidFields#

&lt;/body&gt;
&lt;/html&gt;
</pre>

<hr />
<p align="right"><p align="right"><a href="00001137.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001139.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001138.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



