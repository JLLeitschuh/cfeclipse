<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>cfftp: Connection: File and directory operations</title>
</head>
<body>
<p align="right"><p align="right"><a href="00000260.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000262.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>cfftp: Connection: File and directory operations</h1>
<h4><a name="wp1800844"></a>Description</h4>
<p>Use this form of the <code>cfftp</code> tag to perform file and directory operations with <code>cfftp</code>.</p>
<h4><a name="wp1800850"></a>Syntax</h4>
<pre>&lt;cfftp <br />   action = &quot;action&quot;<br />   username = &quot;name&quot;<br />   password = &quot;password&quot;<br />   name = &quot;query_name&quot;<br />   server = &quot;server&quot;<br />   ASCIIExtensionList = &quot;extensions&quot;<br />   transferMode = &quot;mode&quot;<br />   failIfExists = &quot;yes&quot; or &quot;no&quot;<br />   directory = &quot;directory name&quot;<br />   localFile = &quot;filename&quot;<br />   remoteFile = &quot;filename&quot;<br />   item = &quot;directory or file&quot;<br />   existing = &quot;file or directory name&quot;<br />   new = &quot;file or directory name&quot;<br />   proxyServer = &quot;proxy server&quot;<br />   passive = &quot;yes&quot; or &quot;no&quot;&gt;<br />result = &quot;result_name&quot;
</pre><h4><a name="wp2276915"></a>See also</h4>
<p><a href="00000272.htm#1632966"><code>cfhttp</code></a><code>, </code><a href="00000283.htm#1100581"><code>cfldap</code></a><code>, </code><a href="00000297.htm#2355015"><code>cfmail</code></a><code>, </code><a href="00000311.htm#1101854"><code>cfpop</code></a></p>
<h4><a name="wp2220271"></a>Attributes</h4>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
Attribute
    </th>
    <th>
Req/Opt
    </th>
    <th>
Default
    </th>
    <th>
Description
    </th>
  </tr>
  <tr>
    <td>
<p>action</p>
    </td>
    <td>
<p>Required if connection is not cached</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>FTP operation to perform:</p>
<ul>
<li>
   changedir 
</li>
<li>
   createDir 
</li>
<li>
   listDir 
</li>
<li>
   removeDir
</li>
<li>
   getFile 
</li>
<li>
   putFile 
</li>
<li>
   rename 
</li>
<li>
   remove
</li>
<li>
   getCurrentDir 
</li>
<li>
   getCurrentURL 
</li>
<li>
   existsDir 
</li>
<li>
   existsFile 
</li>
<li>
   exists
</li>
</ul>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>username</p>
    </td>
    <td>
<p>Required if connection is not cached</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>User name to pass in the FTP operation.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>password</p>
    </td>
    <td>
<p>Required if <code>action = &quot;open&quot;</code></p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Password to log in the user.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>name</p>
    </td>
    <td>
<p>Required if <code>action = &quot;listDir&quot;</code></p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Query name of directory listing. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>server</p>
    </td>
    <td>
<p>Required if FTP connection is not cached</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>FTP server to which to connect; for example, <code>ftp.myserver.com</code>.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>ASCIIExtensionList</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>txt;htm;html;cfm;cfml;<br />shtm;shtml;<br />css;asp;asa</p>
    </td>
    <td>
<p>Delimited list of file extensions that force ASCII transfer mode, if <code>transferMode</code> <code>=</code> <code>&quot;auto&quot;</code>. </p>
    </td>
  </tr>
  <tr>
    <td>
<p>transferMode</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>Auto</p>
    </td>
    <td>
<ul>
<li>
   ASCII FTP transfer mode
</li>
<li>
   Binary FTP transfer mode
</li>
<li>
   Auto FTP transfer mode
</li>
</ul>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>failIfExists</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>yes</p>
    </td>
    <td>
<ul>
<li>
   yes: if a local file with same name exists, the getFile action will fail.
</li>
<li>
   no
</li>
</ul>
    </td>
  </tr>
  <tr>
    <td>
<p>directory</p>
    </td>
    <td>
<p>Required if <code>action = &quot;changedir&quot;</code>, <code>&quot;createDir&quot;</code><code>, </code><code>&quot;listDir&quot;</code><code>, or </code><code>&quot;existsDir&quot;</code></p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Directory on which to perform an operation.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>localFile</p>
    </td>
    <td>
<p>Required if <code>action = &quot;getFile&quot;</code> or <code>&quot;putFile&quot;</code></p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Name of the file on the local file system.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>remoteFile</p>
    </td>
    <td>
<p>Required if<code> action = &quot;getFile&quot;</code>, <code>&quot;putFile&quot;</code>, or <code>&quot;existsFile&quot;</code></p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Name of the file on the FTP server file system.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>item</p>
    </td>
    <td>
<p>Required if <code>action = &quot;exists&quot;</code> or <code>&quot;remove&quot;</code></p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Object of these actions: file or directory.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>existing</p>
    </td>
    <td>
<p>Required if <code>action = &quot;rename&quot;</code></p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Current name of the file or directory on the remote server.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>new</p>
    </td>
    <td>
<p>Required if <code>action = &quot;rename&quot;</code></p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>New name of file or directory on the remote server.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>proxyServer</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>String. Name of the proxy server (s) to use, if proxy access is specified.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>passive</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>no</p>
    </td>
    <td>
<ul>
<li>
   yes: enables passive mode.
</li>
<li>
   no
</li>
</ul>
    </td>
  </tr>
  <tr>
    <td>
<p>result</p>
    </td>
    <td>
<p>Optional</p>
    </td>
    <td>
<p>&#160;</p>
    </td>
    <td>
<p>Specifies a name for the structure in which cfftp stores the <code>returnValue</code> variable. If set, this value replaces <code>cfftp</code> as the prefix to use when accessing <code>returnVariable</code>. See the Usage section for more information</p>
    </td>
  </tr>
</table>

<h4><a name="wp2531705"></a>Usage</h4>
<p>If you use connection caching to an active FTP connection, you do not have to respecify the <code>username</code>, <code>password</code>, or <code>server</code> connection attributes.</p>
<p>Changing a cached connection, such as changing <code>retryCount</code> or <code>timeout</code> values, might require reestablishing the connection. </p>
<p>If <code>action = &quot;listDir&quot;</code>, the <code>attributes</code> column returns <code>directory</code> or <code>normal</code>. Other platform-specific values, such as <code>hidden</code> and <code>system</code>, are no longer supported.</p>
<p>If <code>action = &quot;listDir&quot;</code>, a <code>mode</code> column is returned. The column contains an octal string representation of UNIX permissions; for example, &quot;<code>777</code>.&quot;</p>
<p>The <code>cfftp.returnValue</code> variable provides the return value for these actions:</p>
<ul>
<li>
   getCurrentDir 
</li>
<li>
   getCurrentURL 
</li>
<li>
   existsDir 
</li>
<li>
   existsFile 
</li>
<li>
   exists
</li>
</ul>
<p>For more information, see <i>ColdFusion MX Developer's Guide</i>.</p>
<p><strong>Caution: </strong>Object (file and directory) names are case-sensitive. </p><h4><a name="wp1801040"></a>Action (cfftp.ReturnValue variable)</h4>
<p>The results of an action determine the value of the <code>returnValue</code> variable, as the following table shows:</p>
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <th>
cfftp action
    </th>
    <th>
Value of cfftp.returnValue
    </th>
  </tr>
  <tr>
    <td>
<p>getCurrentDir</p>
    </td>
    <td>
<p>String. Current directory.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>getCurrentURL</p>
    </td>
    <td>
<p>String. Current URL.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>existsDir</p>
    </td>
    <td>
<p>yes or no.</p>
    </td>
  </tr>
  <tr bgcolor="#F8F8F8">
    <td>
<p>existsFile</p>
    </td>
    <td>
<p>yes or no.</p>
    </td>
  </tr>
  <tr>
    <td>
<p>exists</p>
    </td>
    <td>
<p>yes or no.</p>
    </td>
  </tr>
</table>

<p>To access the <code>returnValue</code> variable, you must prefix it with either <code>cfftp</code> or the value specified by the <code>result</code> attribute, if it is set. The <code>result</code> attribute provides a way for <code>cfftp</code> calls from multiple pages, possibly at the same time, to avoid overwriting the results of one with another. If you set the <code>result</code> attribute to <code>myResult</code>, for example, you would access the <code>returnVariable</code> variable as <code>myResult.returnVariable</code>. Otherwise, you would access it as <code>cfftp.returnVariable.</code></p>
<h4><a name="wp3490794"></a>Example</h4>
<p>The following example opens a connection and gets a file listing showing file or directory name, path, URL, length, and modification date: </p>
<pre>&lt;p&gt;Open a connection
&lt;cfftp connection = &quot;myConnection&quot; 
   username = &quot;myUserName&quot;
   password = &quot;myUserName@allaire.com&quot;
   server = &quot;ftp.allaire.com&quot;
   action = &quot;open&quot; 
   stopOnError = &quot;Yes&quot;&gt; 

&lt;p&gt;Did it succeed? &lt;cfoutput&gt;#cfftp.succeeded#&lt;/cfoutput&gt;
&lt;cfftp connection = &quot;myConnection&quot;
    action = &quot;LISTDIR&quot;
    stopOnError = &quot;Yes&quot;
    name = &quot;ListDirs&quot;
    directory = &quot;/&quot;&gt;

&lt;p&gt;FTP Directory Listing:&lt;br&gt; 
&lt;cftable query = &quot;ListDirs&quot; HTMLTable = &quot;Yes&quot; colHeaders = &quot;Yes&quot;&gt; 
   &lt;cfcol header = &quot;&lt;b&gt;Name&lt;/b&gt;&quot; text = &quot;#name#&quot;&gt;  
   &lt;cfcol header = &quot;&lt;b&gt;Path&lt;/b&gt;&quot; text = &quot;#path#&quot;&gt; 
   &lt;cfcol header = &quot;&lt;b&gt;URL&lt;/b&gt;&quot; text = &quot;#url#&quot;&gt; 
   &lt;cfcol header = &quot;&lt;b&gt;Length&lt;/b&gt;&quot; text = &quot;#length#&quot;&gt; 
   &lt;cfcol header = &quot;&lt;b&gt;LastModified&lt;/b&gt;&quot; 
    text = &quot;#DateFormat(lastmodified)#&quot;&gt;  
   &lt;cfcol header = &quot;&lt;b&gt;IsDirectory&lt;/b&gt;&quot; text = &quot;#isdirectory#&quot;&gt; 
&lt;/cftable&gt;

&lt;p&gt;Move Image File to Remote Server:&lt;br&gt;&lt;/p&gt;
&lt;!--- The image will be put into the root directory of the FTP server unless 
otherwise noted. 
i.e. remoteFile = &quot;somewhere_put.jpg&quot; vs remoteFile = &quot;/support/somewhere_put.jpg&quot;
---&gt; 
&lt;cfftp 
connection = &quot;myConnection&quot;
action = &quot;putFile&quot; 
name = &quot;uploadFile&quot; 
transferMode = &quot;binary&quot; 
localFile = &quot;C:\files\upload\somewhere.jpg&quot; 
remoteFile = &quot;somewhere_put.jpg&quot; 
&gt;
&lt;p&gt;Did it succeed? &lt;cfoutput&gt;#cfftp.succeeded#&lt;/cfoutput&gt; 

&lt;p&gt;Close the connection:
&lt;cfftp connection = &quot;myConnection&quot;
    action = &quot;close&quot;
    stopOnError = &quot;Yes&quot;&gt;
&lt;p&gt;Did it succeed? &lt;cfoutput&gt;#cfftp.succeeded#&lt;/cfoutput&gt;
</pre>

<hr />
<p align="right"><p align="right"><a href="00000260.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000262.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00000261.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



