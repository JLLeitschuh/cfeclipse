<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Handling errors with ColdFusion and Flash</title>
</head>
<body>
<p align="right"><p align="right"><a href="00001482.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001484.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Handling errors with ColdFusion and Flash</h1>
<p>To help with debugging, use the <a href="00000349.htm#1104557"><code>cftry</code></a> and <a href="00000225.htm#3395038"><code>cfcatch</code></a> tags in your ColdFusion page or component to return error messages to the Flash Player. For example, the ColdFusion page, causeError.cfm, contains the code:</p>
<pre>&lt;cftry&gt;
   &lt;cfset dev = Val(0)&gt;
   &lt;cfset Flash.Result = (1 / dev)&gt;
   &lt;cfcatch type = &quot;any&quot;&gt;
      &lt;cfthrow message = &quot;An error occurred in this service: #cfcatch.message#&quot;&gt;
   &lt;/cfcatch&gt;
&lt;/cftry&gt;
</pre><p>The second <code>cfset</code> tag in this example fails because it tries to divide by zero (0)<code>. </code>The <code>message</code> attribute of the <code>cfthrow</code> tag describes the error; ColdFusion returns this attribute to the Flash application. </p>
<p>To handle the error in your Flash application, create a fault handler similar to <code>causeError_Fault</code> in the following example:</p>
<pre>import mx.remoting.*;  
import mx.services.Log;
import mx.rpc.*; 

// Connect to service and create service object
   var CFMService:Service = new Service(
         &quot;http://localhost/flashservices/gateway&quot;,
         null,
         &quot;helloExamples&quot;,
         null, 
         null );
// Call the service causeError() method
var pc:PendingCall = CFMService.causeError();
// Tell the service what methods handle result and fault conditions
pc.responder = new RelayResponder( this, &quot;causeError_Result&quot;, &quot;causeError_Fault&quot; );  
  
function causeError_Result(re:ResultEvent)
{
   // Display successful result
   messageDisplay.text = re.result;
}

function causeError_Fault(fe:FaultEvent)
{
   // Display fault returned from service
   trace(&quot;Error message from causeError is: &quot; + fe.fault.description);
}
</pre><p>This example displays the trace message from the <code>causeError_Fault</code> function in the Flash Output panel. The portion of the message that is contained in <code>fe.fault.description</code> is the portion of the message that is contained in <code>#cfcatch.message#</code> in the causeError.cfm page.</p>
<p><strong>Note: </strong>When you create a ColdFusion page that communicates with Flash, ensure that the ColdFusion page works before using it with Flash. </p>

<hr />
<p align="right"><p align="right"><a href="00001482.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00001484.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00001483.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



