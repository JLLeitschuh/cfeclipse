<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <script src="pages.js" type="text/javascript" language="Javascript1.2" charset="UTF-8"></script>
   <title>Populating an array from a query</title>
</head>
<body>
<p align="right"><p align="right"><a href="00000956.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000958.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<hr />
<h1>Populating an array from a query</h1>
<p>When populating an array from a query, keep the following things in mind:</p>
<ul>
<li>
   You cannot add query data to an array all at once. A looping structure is generally required to populate an array from a query.
</li>
<li>
   You can reference query column data using array-like syntax. For example, myquery.col_name[1] references data in the first row in the col_name column of the myquery query. 
</li>
<li>
   Inside a <a href="00000290.htm#3301338"><code>cfloop</code></a> <code>query=</code> loop, you do not have to specify the query name to reference the query's variables.
</li>
</ul>
<p>You can use a <code>cfset</code> tag with the following syntax to define values for array indexes:</p>
<pre>&lt;cfset <code><i>arrayName</i></code>[<code><i>index</i></code>]=<code><i>queryColumn</i></code>[<code><i>row</i></code>]&gt;
</pre><p>In the following example, a <code>cfloop</code> tag places four columns of data from a sample data source into an array, myarray.</p>
<pre>&lt;!--- Do the query ---&gt;
&lt;cfquery name=&quot;test&quot; datasource=&quot;cfdocexamples&quot;&gt;
   SELECT Emp_ID, LastName, FirstName, Email
   FROM Employees
&lt;/cfquery&gt;

&lt;!--- Declare the array ---&gt;
&lt;cfset myarray=arraynew(2)&gt;

&lt;!--- Populate the array row by row ---&gt;
&lt;cfloop query=&quot;test&quot;&gt;
   &lt;cfset myarray[CurrentRow][1]=Emp_ID&gt;
   &lt;cfset myarray[CurrentRow][2]=LastName&gt;
   &lt;cfset myarray[CurrentRow][3]=FirstName&gt;
   &lt;cfset myarray[CurrentRow][4]=Email&gt;
&lt;/cfloop&gt;

&lt;!--- Now, create a loop to output the array contents ---&gt;
&lt;cfset total_records=test.recordcount&gt;
&lt;cfloop index=&quot;Counter&quot; from=1 to=&quot;#Total_Records#&quot;&gt;
   &lt;cfoutput&gt;
      ID: #MyArray[Counter][1]#,
      LASTNAME: #MyArray[Counter][2]#,
      FIRSTNAME: #MyArray[Counter][3]#,
      EMAIL: #MyArray[Counter][4]# &lt;br&gt;
   &lt;/cfoutput&gt;
&lt;/cfloop&gt;
</pre><p>This example uses the query object built-in variable CurrentRow to index the first dimension of the array.</p>


<hr />
<p align="right"><p align="right"><a href="00000956.htm"><img src="images/previous.gif" width="9" height="14" border="0" alt="Previous"></a>&nbsp;&nbsp;<a href="00000958.htm"><img src="images/next.gif" width="9" height="14" border="0" alt="Next"></a>
</p></p>
<p><a href="http://livedocs.macromedia.com/coldfusion/7/htmldocs/00000957.htm" target="mm_window">View comments in LiveDocs</a></p>
 </body>
</html>



